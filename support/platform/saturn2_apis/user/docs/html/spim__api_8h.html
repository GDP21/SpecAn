<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>spim_api.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>spim_api.h File Reference</h1>Serial Peripheral Interface Master API.  
<a href="#_details">More...</a>
<p>

<p>
<a href="spim__api_8h-source.html">Go to the source code of this file.</a><h2>Data Structures</h2>
<ul>
<li>struct <a class="el" href="structspim__device__param__t.html">spim_device_param_t</a>
<dl class="el"><dd class="mdescRight">This structure defines communication parameters for a given slave device.  <a href="structspim__device__param__t.html#_details">More...</a><br></dl><li>struct <a class="el" href="structspim__init__param__t.html">spim_init_param_t</a>
<dl class="el"><dd class="mdescRight">This structure contains initialisation parameters.  <a href="structspim__init__param__t.html#_details">More...</a><br></dl><li>struct <a class="el" href="structspim__block__tag.html">spim_block_tag</a>
<dl class="el"><dd class="mdescRight">This structure defines the SPIM block object - NO USER SERVICABLE PARTS.  <a href="structspim__block__tag.html#_details">More...</a><br></dl><li>struct <a class="el" href="structspim__buf__t.html">spim_buf_t</a>
<dl class="el"><dd class="mdescRight">This structure contains parameters that describe an SPIM operation.  <a href="structspim__buf__t.html#_details">More...</a><br></dl></ul>
<h2>Defines</h2>
<ul>
<li>#define <a class="el" href="spim__api_8h.html#6247d22e19395abea1238590fe266262">SPIM_NUM_PORTS_PER_BLOCK</a>&nbsp;&nbsp;&nbsp;( SPIM_DUMMY_CS )
<li>#define <a class="el" href="spim__api_8h.html#0fe6bfd8e39db1a0c537391400faecd2">SPIM_MAX_TRANSFER_BYTES</a>&nbsp;&nbsp;&nbsp;( 65536 )
</ul>
<h2>Typedefs</h2>
<ul>
<li><a class="anchor" name="c63288dd3eb28f40eb8e6d76f23be2b4"></a><!-- doxytag: member="spim_api.h::SPIM_sDeviceParam" ref="c63288dd3eb28f40eb8e6d76f23be2b4" args="" -->
typedef struct <a class="el" href="structspim__device__param__t.html">spim_device_param_t</a> <a class="el" href="spim__api_8h.html#c63288dd3eb28f40eb8e6d76f23be2b4">SPIM_sDeviceParam</a>
<dl class="el"><dd class="mdescRight">This structure defines communication parameters for a given slave device. <br></dl><li><a class="anchor" name="3d9ec4e919e5196c8a6cd570cd53a513"></a><!-- doxytag: member="spim_api.h::SPIM_sInitParam" ref="3d9ec4e919e5196c8a6cd570cd53a513" args="" -->
typedef struct <a class="el" href="structspim__init__param__t.html">spim_init_param_t</a> <a class="el" href="spim__api_8h.html#3d9ec4e919e5196c8a6cd570cd53a513">SPIM_sInitParam</a>
<dl class="el"><dd class="mdescRight">This structure contains initialisation parameters. <br></dl><li><a class="anchor" name="ab60d6ff1fcd734bca122db165bd6fb9"></a><!-- doxytag: member="spim_api.h::SPIM_sBlock" ref="ab60d6ff1fcd734bca122db165bd6fb9" args="" -->
typedef struct <a class="el" href="structspim__block__tag.html">spim_block_tag</a> <a class="el" href="spim__api_8h.html#ab60d6ff1fcd734bca122db165bd6fb9">SPIM_sBlock</a>
<dl class="el"><dd class="mdescRight">This structure defines the SPIM block object - NO USER SERVICABLE PARTS. <br></dl><li><a class="anchor" name="d0d5d47609fb044cc6faffc9dad42f5e"></a><!-- doxytag: member="spim_api.h::SPIM_sBuffer" ref="d0d5d47609fb044cc6faffc9dad42f5e" args="" -->
typedef struct <a class="el" href="structspim__buf__t.html">spim_buf_t</a> <a class="el" href="spim__api_8h.html#d0d5d47609fb044cc6faffc9dad42f5e">SPIM_sBuffer</a>
<dl class="el"><dd class="mdescRight">This structure contains parameters that describe an SPIM operation. <br></dl></ul>
<h2>Enumerations</h2>
<ul>
<li>enum <a class="el" href="spim__api_8h.html#0ef13e6cc5161439b32974c90a8aa92a">SPIM_eReturn</a> { <br>
&nbsp;&nbsp;<a class="el" href="spim__api_8h.html#0ef13e6cc5161439b32974c90a8aa92a1c8ab878449612c3fbd007f4c898f639">SPIM_OK</a> =  0, 
<a class="el" href="spim__api_8h.html#0ef13e6cc5161439b32974c90a8aa92a4f98ab0d51a29866b3eb18b10a21a5af">SPIM_INVALID_DMA_CHANNELS</a>, 
<a class="el" href="spim__api_8h.html#0ef13e6cc5161439b32974c90a8aa92a0b16da2f838b57c14b6c505ef835aa76">SPIM_INVALID_SPI_MODE</a>, 
<a class="el" href="spim__api_8h.html#0ef13e6cc5161439b32974c90a8aa92aee2d795aef17caa891233cb17e7328db">SPIM_INVALID_CS_IDLE_LEVEL</a>, 
<br>
&nbsp;&nbsp;<a class="el" href="spim__api_8h.html#0ef13e6cc5161439b32974c90a8aa92ac45a40c844d19271fd156e2a3ef9f629">SPIM_INVALID_DATA_IDLE_LEVEL</a>, 
<a class="el" href="spim__api_8h.html#0ef13e6cc5161439b32974c90a8aa92a26ee063864fa30f52e12af26631d65eb">SPIM_INVALID_CS_LINE</a>, 
<a class="el" href="spim__api_8h.html#0ef13e6cc5161439b32974c90a8aa92a894a16023c98ca3ab069c7fd8928dbfc">SPIM_INVALID_SIZE</a>, 
<a class="el" href="spim__api_8h.html#0ef13e6cc5161439b32974c90a8aa92a1950b966b5e880fa51b52ec61b75af0f">SPIM_INVALID_READ_WRITE</a>, 
<br>
&nbsp;&nbsp;<a class="el" href="spim__api_8h.html#0ef13e6cc5161439b32974c90a8aa92a4aae6473d7eea302806e27d2f56372b9">SPIM_INVALID_CONTINUE</a>, 
<a class="el" href="spim__api_8h.html#0ef13e6cc5161439b32974c90a8aa92a15d1e066a18cb71bd567694302f42e1d">SPIM_INVALID_COMPARE_EQ</a>, 
<a class="el" href="spim__api_8h.html#0ef13e6cc5161439b32974c90a8aa92ab970c367840fe280ad681acb87fffe27">SPIM_INVALID_BLOCK_INDEX</a>
<br>
 }
<li>enum <a class="el" href="spim__api_8h.html#e704addd509aeac01e4cad4603871e80">SPIM_eMode</a> { <a class="el" href="spim__api_8h.html#e704addd509aeac01e4cad4603871e80632c94169a08c9be7f2d50d402f51aa8">SPIM_MODE_0</a> =  0, 
<a class="el" href="spim__api_8h.html#e704addd509aeac01e4cad4603871e80eae700bd5a754791ff0d7acf3bbd65cc">SPIM_MODE_1</a>, 
<a class="el" href="spim__api_8h.html#e704addd509aeac01e4cad4603871e80b7864799a6bbc92f460223388f365d37">SPIM_MODE_2</a>, 
<a class="el" href="spim__api_8h.html#e704addd509aeac01e4cad4603871e80bcdd944d8fbd1d36681a3e55f8cb6a13">SPIM_MODE_3</a>
 }
<li>enum <a class="el" href="spim__api_8h.html#ec38c524b04d19f931c0f669bca84aa3">SPIM_eDevice</a> { <a class="el" href="spim__api_8h.html#ec38c524b04d19f931c0f669bca84aa3aa68205dce1d2cf02c99033fa823563c">SPIM_DEVICE0</a> =  0, 
<a class="el" href="spim__api_8h.html#ec38c524b04d19f931c0f669bca84aa3917ee51a179f58b8b365ad170609e05e">SPIM_DEVICE1</a>, 
<a class="el" href="spim__api_8h.html#ec38c524b04d19f931c0f669bca84aa340661ca912499a32736c8501922ce68b">SPIM_DEVICE2</a>, 
<a class="el" href="spim__api_8h.html#ec38c524b04d19f931c0f669bca84aa3c880b704d1b5066848090a82b5637d4c">SPIM_DUMMY_CS</a>
 }
</ul>
<h2>Functions</h2>
<ul>
<li>img_void <a class="el" href="spim__api_8h.html#001d846d2908049ef2d8bd4478eaf74d">SPIMDefine</a> (<a class="el" href="structioblock__sBlockDescriptorTag.html">ioblock_sBlockDescriptor</a> *psBlockDescriptor)
<li><a class="el" href="spim__api_8h.html#0ef13e6cc5161439b32974c90a8aa92a">SPIM_eReturn</a> <a class="el" href="spim__api_8h.html#03dfe19d9267b4b909fda78476471743">SPIMInit</a> (<a class="el" href="structspim__block__tag.html">SPIM_sBlock</a> *psBlock, <a class="el" href="structspim__init__param__t.html">SPIM_sInitParam</a> *psInitParam)
<li><a class="el" href="spim__api_8h.html#0ef13e6cc5161439b32974c90a8aa92a">SPIM_eReturn</a> <a class="el" href="spim__api_8h.html#ceffeedd49208410e4c397b97467453f">SPIMDeinit</a> (<a class="el" href="structspim__block__tag.html">SPIM_sBlock</a> *psBlock)
<li><a class="el" href="spim__api_8h.html#0ef13e6cc5161439b32974c90a8aa92a">SPIM_eReturn</a> <a class="el" href="spim__api_8h.html#76be3527e8e81664d33eb577bae1880a">SPIMReadWrite</a> (<a class="el" href="structspim__block__tag.html">SPIM_sBlock</a> *psBlock, <a class="el" href="structspim__buf__t.html">SPIM_sBuffer</a> *psA, <a class="el" href="structspim__buf__t.html">SPIM_sBuffer</a> *psB, <a class="el" href="structspim__buf__t.html">SPIM_sBuffer</a> *psC)
</ul>
<h2>Variables</h2>
<ul>
<li><a class="anchor" name="5e184b2042bfc086d350c1980838ca61"></a><!-- doxytag: member="spim_api.h::IMG_asSPIMBlock" ref="5e184b2042bfc086d350c1980838ca61" args="[]" -->
<a class="el" href="structioblock__sBlockDescriptorTag.html">ioblock_sBlockDescriptor</a> <b>IMG_asSPIMBlock</b> []
</ul>
<hr><a name="_details"></a><h2>Detailed Description</h2>
This file contains the header file information for the Serial Peripheral Interface Master (SPIM) API.<p>
<dl class="author" compact><dt><b>Author:</b></dt><dd>Imagination Technologies</dd></dl>
<b>Copyright 2006-2007 by Imagination Technologies Limited.</b><br>
 All rights reserved. No part of this software, either material or conceptual may be copied or distributed, transmitted, transcribed, stored in a retrieval system or translated into any human or computer language in any form by any means, electronic, mechanical, manual or other-wise, or disclosed to the third parties without the express written permission of Imagination Technologies Limited, Home Park Estate, Kings Langley, Hertfordshire, WD4 8LZ, U.K. <hr><h2>Define Documentation</h2>
<a class="anchor" name="6247d22e19395abea1238590fe266262"></a><!-- doxytag: member="spim_api.h::SPIM_NUM_PORTS_PER_BLOCK" ref="6247d22e19395abea1238590fe266262" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SPIM_NUM_PORTS_PER_BLOCK&nbsp;&nbsp;&nbsp;( SPIM_DUMMY_CS )          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Number of chip select lines supported by the SPI master port. 
</div>
</div><p>
<a class="anchor" name="0fe6bfd8e39db1a0c537391400faecd2"></a><!-- doxytag: member="spim_api.h::SPIM_MAX_TRANSFER_BYTES" ref="0fe6bfd8e39db1a0c537391400faecd2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SPIM_MAX_TRANSFER_BYTES&nbsp;&nbsp;&nbsp;( 65536 )          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Maximum transfer size (in bytes) for the SPI master port. 
</div>
</div><p>
<hr><h2>Enumeration Type Documentation</h2>
<a class="anchor" name="0ef13e6cc5161439b32974c90a8aa92a"></a><!-- doxytag: member="spim_api.h::SPIM_eReturn" ref="0ef13e6cc5161439b32974c90a8aa92a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="spim__api_8h.html#0ef13e6cc5161439b32974c90a8aa92a">SPIM_eReturn</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This type defines the SPIM initialisation function return value. <dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="0ef13e6cc5161439b32974c90a8aa92a1c8ab878449612c3fbd007f4c898f639"></a><!-- doxytag: member="SPIM_OK" ref="0ef13e6cc5161439b32974c90a8aa92a1c8ab878449612c3fbd007f4c898f639" args="" -->SPIM_OK</em>&nbsp;</td><td>
Initialisation parameters are valid. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="0ef13e6cc5161439b32974c90a8aa92a4f98ab0d51a29866b3eb18b10a21a5af"></a><!-- doxytag: member="SPIM_INVALID_DMA_CHANNELS" ref="0ef13e6cc5161439b32974c90a8aa92a4f98ab0d51a29866b3eb18b10a21a5af" args="" -->SPIM_INVALID_DMA_CHANNELS</em>&nbsp;</td><td>
DMA channel parameters are invalid. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="0ef13e6cc5161439b32974c90a8aa92a0b16da2f838b57c14b6c505ef835aa76"></a><!-- doxytag: member="SPIM_INVALID_SPI_MODE" ref="0ef13e6cc5161439b32974c90a8aa92a0b16da2f838b57c14b6c505ef835aa76" args="" -->SPIM_INVALID_SPI_MODE</em>&nbsp;</td><td>
Mode parameter is invalid. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="0ef13e6cc5161439b32974c90a8aa92aee2d795aef17caa891233cb17e7328db"></a><!-- doxytag: member="SPIM_INVALID_CS_IDLE_LEVEL" ref="0ef13e6cc5161439b32974c90a8aa92aee2d795aef17caa891233cb17e7328db" args="" -->SPIM_INVALID_CS_IDLE_LEVEL</em>&nbsp;</td><td>
Chip select idle level is invalid. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="0ef13e6cc5161439b32974c90a8aa92ac45a40c844d19271fd156e2a3ef9f629"></a><!-- doxytag: member="SPIM_INVALID_DATA_IDLE_LEVEL" ref="0ef13e6cc5161439b32974c90a8aa92ac45a40c844d19271fd156e2a3ef9f629" args="" -->SPIM_INVALID_DATA_IDLE_LEVEL</em>&nbsp;</td><td>
Data idle level is invalid. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="0ef13e6cc5161439b32974c90a8aa92a26ee063864fa30f52e12af26631d65eb"></a><!-- doxytag: member="SPIM_INVALID_CS_LINE" ref="0ef13e6cc5161439b32974c90a8aa92a26ee063864fa30f52e12af26631d65eb" args="" -->SPIM_INVALID_CS_LINE</em>&nbsp;</td><td>
Chip select line parameter is invalid. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="0ef13e6cc5161439b32974c90a8aa92a894a16023c98ca3ab069c7fd8928dbfc"></a><!-- doxytag: member="SPIM_INVALID_SIZE" ref="0ef13e6cc5161439b32974c90a8aa92a894a16023c98ca3ab069c7fd8928dbfc" args="" -->SPIM_INVALID_SIZE</em>&nbsp;</td><td>
Transfer size parameter is invalid. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="0ef13e6cc5161439b32974c90a8aa92a1950b966b5e880fa51b52ec61b75af0f"></a><!-- doxytag: member="SPIM_INVALID_READ_WRITE" ref="0ef13e6cc5161439b32974c90a8aa92a1950b966b5e880fa51b52ec61b75af0f" args="" -->SPIM_INVALID_READ_WRITE</em>&nbsp;</td><td>
Read/write parameter is invalid. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="0ef13e6cc5161439b32974c90a8aa92a4aae6473d7eea302806e27d2f56372b9"></a><!-- doxytag: member="SPIM_INVALID_CONTINUE" ref="0ef13e6cc5161439b32974c90a8aa92a4aae6473d7eea302806e27d2f56372b9" args="" -->SPIM_INVALID_CONTINUE</em>&nbsp;</td><td>
Continue parameter is invalid. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="0ef13e6cc5161439b32974c90a8aa92a15d1e066a18cb71bd567694302f42e1d"></a><!-- doxytag: member="SPIM_INVALID_COMPARE_EQ" ref="0ef13e6cc5161439b32974c90a8aa92a15d1e066a18cb71bd567694302f42e1d" args="" -->SPIM_INVALID_COMPARE_EQ</em>&nbsp;</td><td>
Compare equal parameter is invalid. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="0ef13e6cc5161439b32974c90a8aa92ab970c367840fe280ad681acb87fffe27"></a><!-- doxytag: member="SPIM_INVALID_BLOCK_INDEX" ref="0ef13e6cc5161439b32974c90a8aa92ab970c367840fe280ad681acb87fffe27" args="" -->SPIM_INVALID_BLOCK_INDEX</em>&nbsp;</td><td>
Invalid block index </td></tr>
</table>
</dl>

</div>
</div><p>
<a class="anchor" name="e704addd509aeac01e4cad4603871e80"></a><!-- doxytag: member="spim_api.h::SPIM_eMode" ref="e704addd509aeac01e4cad4603871e80" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="spim__api_8h.html#e704addd509aeac01e4cad4603871e80">SPIM_eMode</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This type defines the SPI Mode. <dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="e704addd509aeac01e4cad4603871e80632c94169a08c9be7f2d50d402f51aa8"></a><!-- doxytag: member="SPIM_MODE_0" ref="e704addd509aeac01e4cad4603871e80632c94169a08c9be7f2d50d402f51aa8" args="" -->SPIM_MODE_0</em>&nbsp;</td><td>
Mode 0 (clock idle low, data valid on first clock transition). </td></tr>
<tr><td valign="top"><em><a class="anchor" name="e704addd509aeac01e4cad4603871e80eae700bd5a754791ff0d7acf3bbd65cc"></a><!-- doxytag: member="SPIM_MODE_1" ref="e704addd509aeac01e4cad4603871e80eae700bd5a754791ff0d7acf3bbd65cc" args="" -->SPIM_MODE_1</em>&nbsp;</td><td>
Mode 1 (clock idle low, data valid on second clock transition). </td></tr>
<tr><td valign="top"><em><a class="anchor" name="e704addd509aeac01e4cad4603871e80b7864799a6bbc92f460223388f365d37"></a><!-- doxytag: member="SPIM_MODE_2" ref="e704addd509aeac01e4cad4603871e80b7864799a6bbc92f460223388f365d37" args="" -->SPIM_MODE_2</em>&nbsp;</td><td>
Mode 2 (clock idle high, data valid on first clock transition). </td></tr>
<tr><td valign="top"><em><a class="anchor" name="e704addd509aeac01e4cad4603871e80bcdd944d8fbd1d36681a3e55f8cb6a13"></a><!-- doxytag: member="SPIM_MODE_3" ref="e704addd509aeac01e4cad4603871e80bcdd944d8fbd1d36681a3e55f8cb6a13" args="" -->SPIM_MODE_3</em>&nbsp;</td><td>
Mode 3 (clock idle high, data valid on second clock transition). </td></tr>
</table>
</dl>

</div>
</div><p>
<a class="anchor" name="ec38c524b04d19f931c0f669bca84aa3"></a><!-- doxytag: member="spim_api.h::SPIM_eDevice" ref="ec38c524b04d19f931c0f669bca84aa3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="spim__api_8h.html#ec38c524b04d19f931c0f669bca84aa3">SPIM_eDevice</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This type defines the SPIM device numbers (chip select lines). <dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="ec38c524b04d19f931c0f669bca84aa3aa68205dce1d2cf02c99033fa823563c"></a><!-- doxytag: member="SPIM_DEVICE0" ref="ec38c524b04d19f931c0f669bca84aa3aa68205dce1d2cf02c99033fa823563c" args="" -->SPIM_DEVICE0</em>&nbsp;</td><td>
Device 0 (CS0). </td></tr>
<tr><td valign="top"><em><a class="anchor" name="ec38c524b04d19f931c0f669bca84aa3917ee51a179f58b8b365ad170609e05e"></a><!-- doxytag: member="SPIM_DEVICE1" ref="ec38c524b04d19f931c0f669bca84aa3917ee51a179f58b8b365ad170609e05e" args="" -->SPIM_DEVICE1</em>&nbsp;</td><td>
Device 1 (CS1). </td></tr>
<tr><td valign="top"><em><a class="anchor" name="ec38c524b04d19f931c0f669bca84aa340661ca912499a32736c8501922ce68b"></a><!-- doxytag: member="SPIM_DEVICE2" ref="ec38c524b04d19f931c0f669bca84aa340661ca912499a32736c8501922ce68b" args="" -->SPIM_DEVICE2</em>&nbsp;</td><td>
Device 2 (CS2). </td></tr>
<tr><td valign="top"><em><a class="anchor" name="ec38c524b04d19f931c0f669bca84aa3c880b704d1b5066848090a82b5637d4c"></a><!-- doxytag: member="SPIM_DUMMY_CS" ref="ec38c524b04d19f931c0f669bca84aa3c880b704d1b5066848090a82b5637d4c" args="" -->SPIM_DUMMY_CS</em>&nbsp;</td><td>
Dummy chip select. </td></tr>
</table>
</dl>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="001d846d2908049ef2d8bd4478eaf74d"></a><!-- doxytag: member="spim_api.h::SPIMDefine" ref="001d846d2908049ef2d8bd4478eaf74d" args="(ioblock_sBlockDescriptor *psBlockDescriptor)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">img_void SPIMDefine           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structioblock__sBlockDescriptorTag.html">ioblock_sBlockDescriptor</a> *&nbsp;</td>
          <td class="paramname"> <em>psBlockDescriptor</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl class="user" compact><dt><b>Description:</b></dt><dd></dd></dl>
This function defines an instance of a SPI Master block. 
</div>
</div><p>
<a class="anchor" name="03dfe19d9267b4b909fda78476471743"></a><!-- doxytag: member="spim_api.h::SPIMInit" ref="03dfe19d9267b4b909fda78476471743" args="(SPIM_sBlock *psBlock, SPIM_sInitParam *psInitParam)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="spim__api_8h.html#0ef13e6cc5161439b32974c90a8aa92a">SPIM_eReturn</a> SPIMInit           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structspim__block__tag.html">SPIM_sBlock</a> *&nbsp;</td>
          <td class="paramname"> <em>psBlock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structspim__init__param__t.html">SPIM_sInitParam</a> *&nbsp;</td>
          <td class="paramname"> <em>psInitParam</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl class="user" compact><dt><b>Description:</b></dt><dd></dd></dl>
This function is used to initialise the SPI Master module.<p>
It must be called before any other SPI Master API function. It is not necessary to call it again unless any of the parameters set up in <a class="el" href="spim__api_8h.html#03dfe19d9267b4b909fda78476471743">SPIMInit()</a> are to be altered.<p>
The function initialises the port, ready for a read or write transaction using any of the available chip select (CS) lines.<br>
 Separate timing parameters may be specified for each CS line and the DMA channels to be used for input and output data are configured.<br>
 The input and output DMA channels must not be the same.<p>
psBlock Pointer to block descriptor.<p>
psInitParam Pointer to initialisation parameters.<p>
SPIM_eReturn SPIM_OK if initialisation parameters are valid SPIM_ERR otherwise 
</div>
</div><p>
<a class="anchor" name="ceffeedd49208410e4c397b97467453f"></a><!-- doxytag: member="spim_api.h::SPIMDeinit" ref="ceffeedd49208410e4c397b97467453f" args="(SPIM_sBlock *psBlock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="spim__api_8h.html#0ef13e6cc5161439b32974c90a8aa92a">SPIM_eReturn</a> SPIMDeinit           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structspim__block__tag.html">SPIM_sBlock</a> *&nbsp;</td>
          <td class="paramname"> <em>psBlock</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl class="user" compact><dt><b>Description:</b></dt><dd></dd></dl>
This function is used to deinitialise the API and should be used as part of a safe system shutdown.<p>
psBlock Pointer to block descriptor.<p>
SPIM_eReturn SPIM_OK if the block pointer is valid, or SPIM_ERR otherwise. 
</div>
</div><p>
<a class="anchor" name="76be3527e8e81664d33eb577bae1880a"></a><!-- doxytag: member="spim_api.h::SPIMReadWrite" ref="76be3527e8e81664d33eb577bae1880a" args="(SPIM_sBlock *psBlock, SPIM_sBuffer *psA, SPIM_sBuffer *psB, SPIM_sBuffer *psC)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="spim__api_8h.html#0ef13e6cc5161439b32974c90a8aa92a">SPIM_eReturn</a> SPIMReadWrite           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structspim__block__tag.html">SPIM_sBlock</a> *&nbsp;</td>
          <td class="paramname"> <em>psBlock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structspim__buf__t.html">SPIM_sBuffer</a> *&nbsp;</td>
          <td class="paramname"> <em>psA</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structspim__buf__t.html">SPIM_sBuffer</a> *&nbsp;</td>
          <td class="paramname"> <em>psB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structspim__buf__t.html">SPIM_sBuffer</a> *&nbsp;</td>
          <td class="paramname"> <em>psC</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl class="user" compact><dt><b>Description:</b></dt><dd></dd></dl>
This function is used to perform an SPI master transaction.<p>
The transaction can involve up to three stages, described by the inputs a, b and c, which are pointers to SPIM_BUF_T structures containing parameters for each operation.<p>
'a' describes the first standard read or write operation.<p>
If required, this can be followed immediately by another read or write operation described by 'b'. If this second read/write is not required, b should be set to NULL.<p>
If the SPIM's compare data functionality is to be used, then this part of the transaction is described in 'c'.<p>
The SPIM API and device driver treats the compare data detection as another operation, which is why the calling function defines it using a third SPIM_BUF_T pointer. The compare date operation will always precede the first standard read/write described in 'a'. The compare data operation involves reading in a series of data bytes from the slave (which are discarded) until it receives a byte that is valid for compare data detection (as defined by the parameters in c). At this point it starts the operation defined by 'a'<p>
If the compare data operation is not required, c should be set to NULL.<p>
Of the parameters contained in the SPIM_BUF_T structure, cmpValue, cmpMask and cmpEq define the conditions for detection of a 'compare data byte'. cmpValue is the value that the SPIM compares with each byte received in a compare data operation. cmpMask is the bit mask applied to both the received byte and cmpValue when the comparison is made. cmpEq determines whether a detection occurs when the two bytes are equal or when they are not equal.<p>
When a standard SPIM operation (as described by a and/or b) is carried out, the SPIM sets one of the three CS lines (decided by 'chipSelect') to active to begin the operation and transfers 'size' bytes in and out of the SPIM.<p>
This driver does not support simultaneous input and output of data, so for reads no data is written (or any that may inadvertantly be written should be ignored by the slave) and for writes, any received data is ignored.<p>
The 'chipSelect' parameter determines which of the three SPIM_DEVICE_PARAM_T parameter settings (set in the SPIMInit function) will be used.<p>
The 'read' parameter determines whether an operation is a read or write.<p>
The 'buf' parameter points to the first term in the buffer array where, for reads, received data will be stored and, for writes, data will be written from. At the end of the operation, the CS line will go inactive unless 'cont' is set to TRUE, in which case the CS line will remain active for the next operation.<p>
*psBlock Pointer to block descriptor.<p>
*psA Pointer to parameters for first read or write operation in the transaction (excluding compare data operation).<p>
*psB Pointer to parameters for second read or write operation in the transaction (NULL if not required).<p>
*psC Pointer to parameters for compare data operation (NULL if not required).<p>
SPIM_eReturn SPIM_OK if initialisation parameters are valid SPIM_INVALID_&lt;type&gt; if &lt;type&gt; parameter is not valid 
</div>
</div><p>
</div>
</body>
</html>
