<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>gdma_api.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<h1>gdma_api.h</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#if !defined (__GDMA_API_H__)</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span><span class="preprocessor">#define __GDMA_API_H__</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span>
<a name="l00004"></a>00004 <span class="preprocessor">#include "img_defs.h"</span>
<a name="l00005"></a>00005 <span class="preprocessor">#include "<a class="code" href="ioblock__defs_8h.html" title="Typedefs etc for the I/O driver &amp;quot;define&amp;quot; API functions.">ioblock_defs.h</a>"</span>
<a name="l00006"></a>00006 
<a name="l00007"></a>00007 <span class="comment">/*</span>
<a name="l00008"></a>00008 <span class="comment">******************************************************************************</span>
<a name="l00009"></a>00009 <span class="comment">*       Controls values for RPC code generation</span>
<a name="l00010"></a>00010 <span class="comment">*****************************************************************************/</span>
<a name="l00011"></a>00011 <span class="preprocessor">#ifdef __RPCCODEGEN__</span>
<a name="l00012"></a>00012 <span class="preprocessor"></span><span class="preprocessor">#define rpc_prefix              GDMA</span>
<a name="l00013"></a>00013 <span class="preprocessor"></span><span class="preprocessor">#define rpc_filename    gdma_api</span>
<a name="l00014"></a>00014 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00015"></a>00015 <span class="preprocessor"></span>
<a name="l00016"></a>00016 <span class="preprocessor">#include &lt;MeOS.h&gt;</span>
<a name="l00017"></a>00017 
<a name="l00018"></a>00018 <span class="preprocessor">#if !defined GDMA_HW_IMPLEMENTATION</span>
<a name="l00019"></a>00019 <span class="preprocessor"></span><span class="preprocessor">        #error "No DMAC hardware implementation has been specified for the GDMA API"</span>
<a name="l00020"></a>00020 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00021"></a>00021 <span class="preprocessor"></span>
<a name="l00022"></a>00022 <span class="preprocessor">#define GDMA_SYSBUS 0</span>
<a name="l00023"></a>00023 <span class="preprocessor"></span><span class="preprocessor">#define GDMA_MDC        1</span>
<a name="l00024"></a>00024 <span class="preprocessor"></span>
<a name="l00025"></a>00025 <span class="preprocessor">#if GDMA_HW_IMPLEMENTATION == GDMA_SYSBUS</span>
<a name="l00026"></a>00026 <span class="preprocessor"></span><span class="preprocessor">        #include "gdma_sysbus.h"</span>
<a name="l00027"></a>00027 <span class="preprocessor">#elif GDMA_HW_IMPLEMENTATION == GDMA_MDC</span>
<a name="l00028"></a>00028 <span class="preprocessor"></span><span class="preprocessor">        #include "gdma_mdc.h"</span>
<a name="l00029"></a>00029 <span class="preprocessor">#endif</span>
<a name="l00030"></a>00030 <span class="preprocessor"></span>
<a name="l00031"></a>00031 <span class="comment">/******************************************************************************</span>
<a name="l00032"></a>00032 <span class="comment">******************************** Enumerations *********************************</span>
<a name="l00033"></a>00033 <span class="comment">*******************************************************************************/</span>
<a name="l00034"></a>00034 
<a name="l00035"></a>00035 
<a name="l00042"></a>00042 <span class="keyword">typedef</span> <span class="keyword">enum</span>
<a name="l00043"></a>00043 {
<a name="l00045"></a>00045     GDMA_DEINITIALISED = 0,
<a name="l00046"></a>00046 
<a name="l00048"></a>00048     GDMA_INITIALISED,
<a name="l00049"></a>00049 
<a name="l00051"></a>00051     GDMA_IDLE,
<a name="l00052"></a>00052 
<a name="l00054"></a>00054     GDMA_DISABLED,
<a name="l00055"></a>00055 
<a name="l00057"></a>00057     GDMA_RUNNING,
<a name="l00058"></a>00058 
<a name="l00060"></a>00060     GDMA_FINISHING,
<a name="l00061"></a>00061 
<a name="l00063"></a>00063     GDMA_STATE_MAX
<a name="l00064"></a>00064 
<a name="l00065"></a>00065 } GDMA_eState;
<a name="l00066"></a>00066 
<a name="l00067"></a>00067 
<a name="l00068"></a>00068 <span class="comment">/******************************************************************************</span>
<a name="l00069"></a>00069 <span class="comment">****************************** End enumerations *******************************</span>
<a name="l00070"></a>00070 <span class="comment">*******************************************************************************/</span>
<a name="l00071"></a>00071 
<a name="l00072"></a>00072 
<a name="l00073"></a>00073 <span class="comment">/******************************************************************************</span>
<a name="l00074"></a>00074 <span class="comment">****************************** Macro Definitions ******************************</span>
<a name="l00075"></a>00075 <span class="comment">*******************************************************************************/</span>
<a name="l00076"></a>00076 
<a name="l00078"></a>00078 <span class="preprocessor">#define GDMA_INFWAIT   -1</span>
<a name="l00079"></a>00079 <span class="preprocessor"></span>
<a name="l00081"></a>00081 <span class="preprocessor">#define GDMA_NOWAIT     0</span>
<a name="l00082"></a>00082 <span class="preprocessor"></span>
<a name="l00083"></a>00083 
<a name="l00084"></a>00084 <span class="comment">/******************************************************************************</span>
<a name="l00085"></a>00085 <span class="comment">**************************** End Macro Definitions ****************************</span>
<a name="l00086"></a>00086 <span class="comment">*******************************************************************************/</span>
<a name="l00087"></a>00087 
<a name="l00094"></a><a class="code" href="structtag__gdma__txfr__object.html">00094</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structtag__gdma__txfr__object.html">tag_gdma_txfr_object</a>
<a name="l00095"></a>00095 {
<a name="l00097"></a><a class="code" href="structtag__gdma__txfr__object.html#9b119d0d3092c47fcb693922f03361f8">00097</a>     KRN_POOLLINK_T                      <a class="code" href="structtag__gdma__txfr__object.html#9b119d0d3092c47fcb693922f03361f8">pool</a>;
<a name="l00098"></a>00098 
<a name="l00100"></a><a class="code" href="structtag__gdma__txfr__object.html#73f975f6d7bba4a590f5f674bb1d1a2d">00100</a>     IMG_UINT8 *                         <a class="code" href="structtag__gdma__txfr__object.html#73f975f6d7bba4a590f5f674bb1d1a2d">pui8ReadPointer</a>;
<a name="l00101"></a>00101 
<a name="l00103"></a><a class="code" href="structtag__gdma__txfr__object.html#2d411248d4c93f038d9c9d1db0762d8b">00103</a>     IMG_BOOL                            <a class="code" href="structtag__gdma__txfr__object.html#2d411248d4c93f038d9c9d1db0762d8b">bIncReadPointer</a>;
<a name="l00104"></a>00104 
<a name="l00106"></a><a class="code" href="structtag__gdma__txfr__object.html#f792c841ab45acb5a72d9b3786331643">00106</a>     IMG_UINT32                          <a class="code" href="structtag__gdma__txfr__object.html#f792c841ab45acb5a72d9b3786331643">ui32ReadWidth</a>;
<a name="l00107"></a>00107 
<a name="l00109"></a><a class="code" href="structtag__gdma__txfr__object.html#23225fdc1c06a4e213dbc945e3696a20">00109</a>     IMG_UINT8 *                         <a class="code" href="structtag__gdma__txfr__object.html#23225fdc1c06a4e213dbc945e3696a20">pui8WritePointer</a>;
<a name="l00110"></a>00110 
<a name="l00112"></a><a class="code" href="structtag__gdma__txfr__object.html#5bdc5395bfd23db5d65ad764edde3b27">00112</a>     IMG_BOOL                            <a class="code" href="structtag__gdma__txfr__object.html#5bdc5395bfd23db5d65ad764edde3b27">bIncWritePointer</a>;
<a name="l00113"></a>00113 
<a name="l00115"></a><a class="code" href="structtag__gdma__txfr__object.html#4098e49d74e4d775b8aee7b4a1961f37">00115</a>     IMG_UINT32                          <a class="code" href="structtag__gdma__txfr__object.html#4098e49d74e4d775b8aee7b4a1961f37">ui32WriteWidth</a>;
<a name="l00116"></a>00116 
<a name="l00118"></a><a class="code" href="structtag__gdma__txfr__object.html#63f28e44181e2d848bd83a33815cfa64">00118</a>     IMG_UINT32                          <a class="code" href="structtag__gdma__txfr__object.html#63f28e44181e2d848bd83a33815cfa64">ui32SizeInBytes</a>;
<a name="l00119"></a>00119 
<a name="l00121"></a><a class="code" href="structtag__gdma__txfr__object.html#35a413a91e2091e578ee4ec58df2d96e">00121</a>     IMG_UINT8                           <a class="code" href="structtag__gdma__txfr__object.html#35a413a91e2091e578ee4ec58df2d96e">ui8Priority</a>;
<a name="l00122"></a>00122 
<a name="l00124"></a><a class="code" href="structtag__gdma__txfr__object.html#07e0ba6a3bb7eea35e1b1541f249c12e">00124</a>     IMG_BOOL                            <a class="code" href="structtag__gdma__txfr__object.html#07e0ba6a3bb7eea35e1b1541f249c12e">bReverseEndianism</a>;
<a name="l00125"></a>00125 
<a name="l00127"></a><a class="code" href="structtag__gdma__txfr__object.html#188c44b38f1b936ce857da2875ec2ee6">00127</a>     IMG_BOOL                <a class="code" href="structtag__gdma__txfr__object.html#188c44b38f1b936ce857da2875ec2ee6">bWaitUnpack</a>;
<a name="l00128"></a>00128 
<a name="l00130"></a><a class="code" href="structtag__gdma__txfr__object.html#bba6008305460d31777ef17abb179459">00130</a>     IMG_UINT32                          <a class="code" href="structtag__gdma__txfr__object.html#bba6008305460d31777ef17abb179459">ui32HoldOff</a>;
<a name="l00131"></a>00131 
<a name="l00133"></a><a class="code" href="structtag__gdma__txfr__object.html#ecbb3797c45abdb22144d7f9f2a68313">00133</a>     IMG_UINT32                          <a class="code" href="structtag__gdma__txfr__object.html#ecbb3797c45abdb22144d7f9f2a68313">ui32BurstSize</a>;
<a name="l00134"></a>00134 
<a name="l00136"></a><a class="code" href="structtag__gdma__txfr__object.html#d6344ad1b9ce1748f497fbaf46051f6c">00136</a>         IMG_VOID *                              <a class="code" href="structtag__gdma__txfr__object.html#d6344ad1b9ce1748f497fbaf46051f6c">pvUserData</a>;
<a name="l00137"></a>00137 
<a name="l00139"></a><a class="code" href="structtag__gdma__txfr__object.html#239b9dd1af10fda691a3694c0e16f44c">00139</a>         IMG_UINT32                              <a class="code" href="structtag__gdma__txfr__object.html#239b9dd1af10fda691a3694c0e16f44c">ui32UserDataSize</a>;
<a name="l00140"></a>00140 
<a name="l00141"></a>00141 } <a class="code" href="structtag__gdma__txfr__object.html">GDMA_sTransferObject</a>;
<a name="l00142"></a>00142 
<a name="l00157"></a>00157 <span class="keyword">typedef</span> IMG_RESULT (*GDMA_pfnDevice)(IMG_VOID *);
<a name="l00158"></a>00158 
<a name="l00159"></a>00159 
<a name="l00186"></a>00186 <span class="keyword">typedef</span> IMG_RESULT (*GDMA_pfnCompletion)(<a class="code" href="structtag__gdma__txfr__object.html">GDMA_sTransferObject</a> *, QIO_STATUS_T, IMG_VOID *);
<a name="l00187"></a>00187 
<a name="l00194"></a><a class="code" href="structtag__gdma__device__functions.html">00194</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structtag__gdma__device__functions.html">tag_gdma_device_functions</a>
<a name="l00195"></a>00195 {
<a name="l00197"></a><a class="code" href="structtag__gdma__device__functions.html#e14665db9a7e1f0f710872cb771b8ae7">00197</a>     GDMA_pfnDevice              <a class="code" href="structtag__gdma__device__functions.html#e14665db9a7e1f0f710872cb771b8ae7">pfnInitDevice</a>;
<a name="l00198"></a>00198 
<a name="l00200"></a><a class="code" href="structtag__gdma__device__functions.html#fb10a56f0dc8048c2658ca30337f8563">00200</a>     GDMA_pfnDevice              <a class="code" href="structtag__gdma__device__functions.html#fb10a56f0dc8048c2658ca30337f8563">pfnStartDevice</a>;
<a name="l00201"></a>00201 
<a name="l00203"></a><a class="code" href="structtag__gdma__device__functions.html#a08a84ad35405c2940bb061ad3b00039">00203</a>     GDMA_pfnDevice              <a class="code" href="structtag__gdma__device__functions.html#a08a84ad35405c2940bb061ad3b00039">pfnCancelDevice</a>;
<a name="l00204"></a>00204 
<a name="l00206"></a>00206     <span class="comment">/*  pointer may not be set to IMG_NULL when the GDMA API is operating in    */</span>
<a name="l00207"></a>00207     <span class="comment">/*  'bypassQIO' mode. This is because normally (1) QIO posts details of     */</span>
<a name="l00208"></a>00208     <span class="comment">/*  completed operations to the mailbox contained in the master context             */</span>
<a name="l00209"></a>00209     <span class="comment">/*  structure and (2) the 'GDMA_WaitObject' function is used to block until */</span>
<a name="l00210"></a>00210     <span class="comment">/*  a completed operation is available for collection from the mailbox.             */</span>
<a name="l00211"></a>00211     <span class="comment">/*  When operations are not being queued by QIO, this mechanism is not              */</span>
<a name="l00212"></a>00212     <span class="comment">/*  available (and the 'GDMA_WaitObject' function will return an error if   */</span>
<a name="l00213"></a>00213     <span class="comment">/*  called. As such, the callback functions are the only means by which the */</span>
<a name="l00214"></a>00214     <span class="comment">/*  user is informed of operations completing - because, in this mode,              */</span>
<a name="l00215"></a>00215     <span class="comment">/*  it is not possible to queue operations, the user must use the                   */</span>
<a name="l00216"></a>00216     <span class="comment">/*  completion callback to ensure that new operations are not submitted             */</span>
<a name="l00217"></a>00217     <span class="comment">/*  before the previous one is complete.                                                                    */</span>
<a name="l00218"></a><a class="code" href="structtag__gdma__device__functions.html#a8a44832d3d3f3cf625edb8a99b1f5cc">00218</a>     GDMA_pfnCompletion                  <a class="code" href="structtag__gdma__device__functions.html#a8a44832d3d3f3cf625edb8a99b1f5cc">pfnCompletion</a>;
<a name="l00219"></a>00219 
<a name="l00220"></a>00220 } <a class="code" href="structtag__gdma__device__functions.html">GDMA_sCallbackFunctions</a>;
<a name="l00221"></a>00221 
<a name="l00222"></a>00222 
<a name="l00230"></a><a class="code" href="structGDMA__sWrappedLinkedListDescriptor__tag.html">00230</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structGDMA__sWrappedLinkedListDescriptor__tag.html">GDMA_sWrappedLinkedListDescriptor_tag</a>
<a name="l00231"></a>00231 {
<a name="l00233"></a><a class="code" href="structGDMA__sWrappedLinkedListDescriptor__tag.html#5527aa3fc45ab6f5d3691afa8a19e956">00233</a>         <a class="code" href="structGDMA__sLinkedListDescriptor__tag.html">GDMA_sLinkedListDescriptor</a>      <a class="code" href="structGDMA__sWrappedLinkedListDescriptor__tag.html#5527aa3fc45ab6f5d3691afa8a19e956">sLinkedListDescriptor</a>;
<a name="l00234"></a>00234 
<a name="l00236"></a>00236         <span class="comment">/*  the GDMA API is being used in 'bypassQIO' mode, in which case there are no IO control blocks being returned by QIO from     */</span>
<a name="l00237"></a>00237         <span class="comment">/*  which to obtain the transfer object originally submitted. As such, it is necessary to store this pointer along with the     */</span>
<a name="l00238"></a>00238         <span class="comment">/*  linked list descriptors themselves.                                                                                                                                                                         */</span>
<a name="l00239"></a><a class="code" href="structGDMA__sWrappedLinkedListDescriptor__tag.html#7426b7e3c2eac366b36717c2138cf9d0">00239</a>         <a class="code" href="structtag__gdma__txfr__object.html">GDMA_sTransferObject</a> *          <a class="code" href="structGDMA__sWrappedLinkedListDescriptor__tag.html#7426b7e3c2eac366b36717c2138cf9d0">psTransferObject</a>;
<a name="l00240"></a>00240 
<a name="l00241"></a>00241 } <a class="code" href="structGDMA__sWrappedLinkedListDescriptor__tag.html">GDMA_sWrappedLinkedListDescriptor</a>;
<a name="l00242"></a>00242 
<a name="l00244"></a>00244 <span class="comment">/*      The macro will create an array of name &lt;listName&gt; and &lt;size&gt; linked list descriptors. The same values used as parameters to     */</span>
<a name="l00245"></a>00245 <span class="comment">/*      this array should then be used as parameters 'pasLinkedListElements' and 'ui32NoOfLinkedListElements' in the subsequent         */</span>
<a name="l00246"></a>00246 <span class="comment">/*      to the function 'GDMA_Initialise' (see below).                                                                                                                                                          */</span>
<a name="l00247"></a>00247 <span class="preprocessor">#define GDMA_ALLOCATE_LINKED_LIST(listName, size) GDMA_sWrappedLinkedListDescriptor listName[(size*(sizeof(GDMA_sWrappedLinkedListDescriptor)))] __attribute__ ((aligned(8)))</span>
<a name="l00248"></a>00248 <span class="preprocessor"></span>
<a name="l00275"></a><a class="code" href="structtag__gdma__linkedlist__status.html">00275</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structtag__gdma__linkedlist__status.html">tag_gdma_linkedlist_status</a>
<a name="l00276"></a>00276 {
<a name="l00278"></a>00278     <span class="comment">/*  'GDMA_ALLOCATE_LINKED_LIST' macro.                                                                      */</span>
<a name="l00279"></a><a class="code" href="structtag__gdma__linkedlist__status.html#2b3a11dff19fd0c28e5b220356b397cd">00279</a>     <a class="code" href="structGDMA__sWrappedLinkedListDescriptor__tag.html">GDMA_sWrappedLinkedListDescriptor</a> *   <a class="code" href="structtag__gdma__linkedlist__status.html#2b3a11dff19fd0c28e5b220356b397cd">pasListElements</a>;
<a name="l00280"></a>00280 
<a name="l00282"></a>00282     <span class="comment">/*  'pasListElements'. This number should be identical to the 'size'        */</span>
<a name="l00283"></a>00283     <span class="comment">/*  parameter passed to the 'GDMA_ALLOCATE_LINKED_LIST' macro.                      */</span>
<a name="l00284"></a><a class="code" href="structtag__gdma__linkedlist__status.html#80912080252235a953212bbde8296fe7">00284</a>     IMG_UINT32          <a class="code" href="structtag__gdma__linkedlist__status.html#80912080252235a953212bbde8296fe7">ui32NoOfListElements</a>;
<a name="l00285"></a>00285 
<a name="l00287"></a>00287     <span class="comment">/*  by the user.                                                                                                            */</span>
<a name="l00288"></a><a class="code" href="structtag__gdma__linkedlist__status.html#bd18a47265b4fc5b2cf4e30c63fc4466">00288</a>     IMG_UINT32          <a class="code" href="structtag__gdma__linkedlist__status.html#bd18a47265b4fc5b2cf4e30c63fc4466">ui32Head</a>;
<a name="l00289"></a>00289 
<a name="l00291"></a>00291     <span class="comment">/*  operation.                                                                                                                      */</span>
<a name="l00292"></a><a class="code" href="structtag__gdma__linkedlist__status.html#7c04619a52dbb7a3461ffd045e928770">00292</a>     IMG_UINT32          <a class="code" href="structtag__gdma__linkedlist__status.html#7c04619a52dbb7a3461ffd045e928770">ui32Last</a>;
<a name="l00293"></a>00293 
<a name="l00295"></a><a class="code" href="structtag__gdma__linkedlist__status.html#3bdd43c381e67fd17c9d92d1647bb0e2">00295</a>     IMG_UINT32          <a class="code" href="structtag__gdma__linkedlist__status.html#3bdd43c381e67fd17c9d92d1647bb0e2">ui32Tail</a>;
<a name="l00296"></a>00296 
<a name="l00298"></a><a class="code" href="structtag__gdma__linkedlist__status.html#e3a73ce5f292c33aeb765d7d49cb592b">00298</a>     IMG_UINT32          <a class="code" href="structtag__gdma__linkedlist__status.html#e3a73ce5f292c33aeb765d7d49cb592b">ui32ActiveBlockIndex</a>;
<a name="l00299"></a>00299 
<a name="l00301"></a>00301     <span class="comment">/*  includes:                                                                                                                       */</span>
<a name="l00302"></a>00302     <span class="comment">/*  - Elements which have been submitted but not yet processed by the       */</span>
<a name="l00303"></a>00303     <span class="comment">/*    DMAC hardware.                                                                                                        */</span>
<a name="l00304"></a>00304     <span class="comment">/*  - The element which the hardware is currently working on.                       */</span>
<a name="l00305"></a><a class="code" href="structtag__gdma__linkedlist__status.html#1977cedb5c32778462fbd6b232129f34">00305</a>     IMG_UINT32          <a class="code" href="structtag__gdma__linkedlist__status.html#1977cedb5c32778462fbd6b232129f34">ui32ListElementsInUse</a>;
<a name="l00306"></a>00306 
<a name="l00308"></a>00308     <span class="comment">/*  the linked list before it may be started. If autostart is enabled       */</span>
<a name="l00309"></a>00309     <span class="comment">/*  then the hardware will begin processing the list when this                      */</span>
<a name="l00310"></a>00310     <span class="comment">/*  threshold is reached. If autostart is not enabled, then attempts        */</span>
<a name="l00311"></a>00311     <span class="comment">/*  to manually start operation (using 'GDMA_StartTransfer') will fail      */</span>
<a name="l00312"></a>00312     <span class="comment">/*  if there are less than the specified number of list elements            */</span>
<a name="l00313"></a>00313     <span class="comment">/*  present.                                                                                                                        */</span>
<a name="l00314"></a><a class="code" href="structtag__gdma__linkedlist__status.html#f9588def97ae456f2088fc1109f7a82e">00314</a>     IMG_UINT32          <a class="code" href="structtag__gdma__linkedlist__status.html#f9588def97ae456f2088fc1109f7a82e">ui32StartListThreshold</a>;
<a name="l00315"></a>00315 
<a name="l00317"></a>00317     <span class="comment">/*  end point, or will continue ad infinitum. If the latter, then           */</span>
<a name="l00318"></a>00318     <span class="comment">/*  no transfer control blocks will be freed until the list is flushed      */</span>
<a name="l00319"></a>00319     <span class="comment">/*  or the API unconfigured.                                                                                        */</span>
<a name="l00320"></a><a class="code" href="structtag__gdma__linkedlist__status.html#379e5f87cd613531dc34527f572b3bb1">00320</a>     IMG_BOOL            <a class="code" href="structtag__gdma__linkedlist__status.html#379e5f87cd613531dc34527f572b3bb1">bCircularList</a>;
<a name="l00321"></a>00321 
<a name="l00322"></a>00322 } <a class="code" href="structtag__gdma__linkedlist__status.html">GDMA_sLinkedListStatus</a>;
<a name="l00323"></a>00323 
<a name="l00330"></a><a class="code" href="structtag__gdma__context.html">00330</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structtag__gdma__context.html">tag_gdma_context</a>
<a name="l00331"></a>00331 {
<a name="l00332"></a>00332         <span class="comment">/* Device name */</span>
<a name="l00333"></a>00333         IMG_UINT8                                       aui8DeviceName [20];
<a name="l00334"></a>00334 
<a name="l00336"></a>00336         <span class="comment">/*      API context.                                                                                                            */</span>
<a name="l00337"></a><a class="code" href="structtag__gdma__context.html#10afa7137de755c11d1052013995d9f4">00337</a>         IMG_UINT32                                      <a class="code" href="structtag__gdma__context.html#10afa7137de755c11d1052013995d9f4">ui32Channel</a>;
<a name="l00338"></a>00338 
<a name="l00340"></a>00340         <span class="comment">/*      Ignored if DMA hardware does not support channel grouping.                      */</span>
<a name="l00341"></a><a class="code" href="structtag__gdma__context.html#714517adf9ec4ad2e1a37958d09029bd">00341</a>         IMG_UINT8                                       <a class="code" href="structtag__gdma__context.html#714517adf9ec4ad2e1a37958d09029bd">ui8ChannelGroup</a>;
<a name="l00342"></a>00342 
<a name="l00344"></a><a class="code" href="structtag__gdma__context.html#a76584410fa0527e73d2ac9d64cae284">00344</a>     GDMA_eState                                 <a class="code" href="structtag__gdma__context.html#a76584410fa0527e73d2ac9d64cae284">eState</a>;
<a name="l00345"></a>00345 
<a name="l00347"></a>00347     <span class="comment">/*  exited from several states, it is necessary to remember the state       */</span>
<a name="l00348"></a>00348     <span class="comment">/*  the API was in before the disable, to enable the correct action to      */</span>
<a name="l00349"></a>00349     <span class="comment">/*  be taken if 'GDMA_Enable' is subsequently called.                                       */</span>
<a name="l00350"></a><a class="code" href="structtag__gdma__context.html#21e3d7b348bbede39608d66fd0025634">00350</a>     GDMA_eState                                 <a class="code" href="structtag__gdma__context.html#21e3d7b348bbede39608d66fd0025634">ePreDisableState</a>;
<a name="l00351"></a>00351 
<a name="l00353"></a><a class="code" href="structtag__gdma__context.html#e3b874f7905ff2302746db8fcf211cba">00353</a>         <a class="code" href="structtag__gdma__device__functions.html">GDMA_sCallbackFunctions</a>         <a class="code" href="structtag__gdma__context.html#e3b874f7905ff2302746db8fcf211cba">sCallbackFunctions</a>;
<a name="l00354"></a>00354 
<a name="l00356"></a>00356         <span class="comment">/*      pointer when 'GDMA_Initialise' is called. The value provided will       */</span>
<a name="l00357"></a>00357         <span class="comment">/*      then be returned as a parameter to all of the GDMA user specified       */</span>
<a name="l00358"></a>00358         <span class="comment">/*      callback functions.                                                                                                     */</span>
<a name="l00359"></a><a class="code" href="structtag__gdma__context.html#f0dc8fbc527ce6855c4f41988de712b4">00359</a>         IMG_VOID *                                      <a class="code" href="structtag__gdma__context.html#f0dc8fbc527ce6855c4f41988de712b4">pvCallbackParameter</a>;
<a name="l00360"></a>00360 
<a name="l00362"></a>00362     <span class="comment">/*  list or single shot mode.                                                                                       */</span>
<a name="l00363"></a><a class="code" href="structtag__gdma__context.html#d2962d0cecd3e672aeb139e49b6a7a59">00363</a>     IMG_BOOL                                    <a class="code" href="structtag__gdma__context.html#d2962d0cecd3e672aeb139e49b6a7a59">bLinkedListMode</a>;
<a name="l00364"></a>00364 
<a name="l00366"></a>00366         <span class="comment">/*      operation.                                                                                                                      */</span>
<a name="l00367"></a><a class="code" href="structtag__gdma__context.html#f0a702ab3983a68b42aa4874dd8d67e5">00367</a>         <a class="code" href="structtag__gdma__linkedlist__status.html">GDMA_sLinkedListStatus</a>          <a class="code" href="structtag__gdma__context.html#f0a702ab3983a68b42aa4874dd8d67e5">sLinkedListStatus</a>;
<a name="l00368"></a>00368 
<a name="l00370"></a><a class="code" href="structtag__gdma__context.html#91195007a26255e33e1cbcf525a624ba">00370</a>     IMG_BOOL                                    <a class="code" href="structtag__gdma__context.html#91195007a26255e33e1cbcf525a624ba">bAutostartEnabled</a>;
<a name="l00371"></a>00371 
<a name="l00373"></a><a class="code" href="structtag__gdma__context.html#44ac5c6f7f9ec32f3955f542daf2fda9">00373</a>     QIO_DEVICE_T                                <a class="code" href="structtag__gdma__context.html#44ac5c6f7f9ec32f3955f542daf2fda9">sDevice</a>;
<a name="l00374"></a>00374 
<a name="l00376"></a><a class="code" href="structtag__gdma__context.html#ae4c61418bc2dd1f05295dcca0e6b295">00376</a>     QIO_DRIVER_T *                              <a class="code" href="structtag__gdma__context.html#ae4c61418bc2dd1f05295dcca0e6b295">sDriver</a>;
<a name="l00377"></a>00377 
<a name="l00379"></a>00379     <span class="comment">/*  operating in 'bypassQIO' mode.                                                                          */</span>
<a name="l00380"></a><a class="code" href="structtag__gdma__context.html#982bc5b22e8155f2dff94c9afa44e564">00380</a>     KRN_MAILBOX_T                               <a class="code" href="structtag__gdma__context.html#982bc5b22e8155f2dff94c9afa44e564">sMBox</a>;
<a name="l00381"></a>00381 
<a name="l00383"></a>00383     <span class="comment">/*  to QIO - unused when operating in 'bypassQIO' mode.                                     */</span>
<a name="l00384"></a><a class="code" href="structtag__gdma__context.html#2e97719ca7df7e9a1938efa46de74398">00384</a>     KRN_POOL_T                                  <a class="code" href="structtag__gdma__context.html#2e97719ca7df7e9a1938efa46de74398">sIOCBPool</a>;
<a name="l00385"></a>00385 
<a name="l00387"></a><a class="code" href="structtag__gdma__context.html#da2a7293b365bb38593564172ef35f32">00387</a>     IMG_BOOL                                    <a class="code" href="structtag__gdma__context.html#da2a7293b365bb38593564172ef35f32">bBypassQIO</a>;
<a name="l00388"></a>00388 
<a name="l00390"></a>00390     <span class="comment">/*  active single shot operation. This pointer is unused when operating     */</span>
<a name="l00391"></a>00391     <span class="comment">/*  in linked list mode.                                                                                            */</span>
<a name="l00392"></a><a class="code" href="structtag__gdma__context.html#9871be3c293df6a7876a83d09b4b2957">00392</a>     <a class="code" href="structtag__gdma__txfr__object.html">GDMA_sTransferObject</a> *              <a class="code" href="structtag__gdma__context.html#9871be3c293df6a7876a83d09b4b2957">psCurrentSingleShotOperation</a>;
<a name="l00393"></a>00393 
<a name="l00394"></a>00394 } <a class="code" href="structtag__gdma__context.html">GDMA_sContext</a>;
<a name="l00395"></a>00395 
<a name="l00396"></a>00396 <span class="comment">/******************************************************************************</span>
<a name="l00397"></a>00397 <span class="comment">**************************** Function definitions *****************************</span>
<a name="l00398"></a>00398 <span class="comment">*******************************************************************************/</span>
<a name="l00399"></a>00399 
<a name="l00418"></a>00418 IMG_RESULT      GDMA_Define
<a name="l00419"></a>00419 (
<a name="l00420"></a>00420         <a class="code" href="structioblock__sBlockDescriptorTag.html">ioblock_sBlockDescriptor</a> *      psThisHWInstance
<a name="l00421"></a>00421 );
<a name="l00422"></a>00422 
<a name="l00423"></a>00423 
<a name="l00579"></a>00579 IMG_RESULT GDMA_Initialise
<a name="l00580"></a>00580 (
<a name="l00581"></a>00581         <a class="code" href="structtag__gdma__context.html">GDMA_sContext</a> *                                                 psContext,
<a name="l00582"></a>00582         IMG_UINT32                                                              ui32HWChannel,
<a name="l00583"></a>00583         IMG_UINT8                                                               ui8ChannelGroup,
<a name="l00584"></a>00584         IMG_BOOL                                                                bLinkedListMode,
<a name="l00585"></a>00585         <a class="code" href="structtag__gdma__device__functions.html">GDMA_sCallbackFunctions</a> *                               psCallbackFunctions,
<a name="l00586"></a>00586         IMG_VOID *                                                              pvCallbackParameter,
<a name="l00587"></a>00587         <a class="code" href="structGDMA__sWrappedLinkedListDescriptor__tag.html">GDMA_sWrappedLinkedListDescriptor</a> *             pasLinkedListElements,
<a name="l00588"></a>00588         IMG_UINT32                                                              ui32NoOfLinkedListElements,
<a name="l00589"></a>00589         IMG_BOOL                                                                bAutostartEnabled,
<a name="l00590"></a>00590         IMG_UINT32                                                              ui32StartListThreshold,
<a name="l00591"></a>00591     QIO_IOCB_T *                                                        pasIOCBs,
<a name="l00592"></a>00592     IMG_UINT32                                                          ui32NoOfIOCBs,
<a name="l00593"></a>00593     IMG_BOOL                                                            bBypassQIO
<a name="l00594"></a>00594 );
<a name="l00595"></a>00595 
<a name="l00596"></a>00596 
<a name="l00616"></a>00616 IMG_RESULT GDMA_Deinitialise
<a name="l00617"></a>00617 (
<a name="l00618"></a>00618     <a class="code" href="structtag__gdma__context.html">GDMA_sContext</a> *                             psContext
<a name="l00619"></a>00619 );
<a name="l00620"></a>00620 
<a name="l00621"></a>00621 
<a name="l00642"></a>00642 IMG_RESULT GDMA_Reset
<a name="l00643"></a>00643 (
<a name="l00644"></a>00644     <a class="code" href="structtag__gdma__context.html">GDMA_sContext</a> *                             psContext
<a name="l00645"></a>00645 );
<a name="l00646"></a>00646 
<a name="l00647"></a>00647 
<a name="l00708"></a>00708 IMG_RESULT GDMA_ListAdd
<a name="l00709"></a>00709 (
<a name="l00710"></a>00710     <a class="code" href="structtag__gdma__context.html">GDMA_sContext</a> *                                     psContext,
<a name="l00711"></a>00711         <a class="code" href="structtag__gdma__txfr__object.html">GDMA_sTransferObject</a> *                  psTransferObject,
<a name="l00712"></a>00712     IMG_BOOL                                            bEndOfList
<a name="l00713"></a>00713 );
<a name="l00714"></a>00714 
<a name="l00715"></a>00715 
<a name="l00738"></a>00738 IMG_RESULT GDMA_Configure
<a name="l00739"></a>00739 (
<a name="l00740"></a>00740     <a class="code" href="structtag__gdma__context.html">GDMA_sContext</a> *                                     psContext
<a name="l00741"></a>00741 );
<a name="l00742"></a>00742 
<a name="l00743"></a>00743 
<a name="l00772"></a>00772 IMG_RESULT GDMA_Unconfigure
<a name="l00773"></a>00773 (
<a name="l00774"></a>00774     <a class="code" href="structtag__gdma__context.html">GDMA_sContext</a> *                                     psContext
<a name="l00775"></a>00775 );
<a name="l00776"></a>00776 
<a name="l00777"></a>00777 
<a name="l00804"></a>00804 IMG_RESULT GDMA_Disable
<a name="l00805"></a>00805 (
<a name="l00806"></a>00806     <a class="code" href="structtag__gdma__context.html">GDMA_sContext</a> *                                     psContext
<a name="l00807"></a>00807 );
<a name="l00808"></a>00808 
<a name="l00809"></a>00809 
<a name="l00845"></a>00845 IMG_RESULT GDMA_Enable
<a name="l00846"></a>00846 (
<a name="l00847"></a>00847     <a class="code" href="structtag__gdma__context.html">GDMA_sContext</a> *                                     psContext
<a name="l00848"></a>00848 );
<a name="l00849"></a>00849 
<a name="l00850"></a>00850 
<a name="l00894"></a>00894 IMG_RESULT GDMA_SingleShotOperation
<a name="l00895"></a>00895 (
<a name="l00896"></a>00896     <a class="code" href="structtag__gdma__context.html">GDMA_sContext</a> *                                     psContext,
<a name="l00897"></a>00897     <a class="code" href="structtag__gdma__txfr__object.html">GDMA_sTransferObject</a> *                      psObject,
<a name="l00898"></a>00898     IMG_INT32                                           i32Timeout
<a name="l00899"></a>00899 );
<a name="l00900"></a>00900 
<a name="l00901"></a>00901 
<a name="l00927"></a>00927 IMG_RESULT GDMA_StartTransfer
<a name="l00928"></a>00928 (
<a name="l00929"></a>00929         <a class="code" href="structtag__gdma__context.html">GDMA_sContext</a> *                                 psContext
<a name="l00930"></a>00930 );
<a name="l00931"></a>00931 
<a name="l00932"></a>00932 
<a name="l00986"></a>00986 IMG_RESULT GDMA_WaitObject
<a name="l00987"></a>00987 (
<a name="l00988"></a>00988     <a class="code" href="structtag__gdma__context.html">GDMA_sContext</a> *                                     psContext,
<a name="l00989"></a>00989     <a class="code" href="structtag__gdma__txfr__object.html">GDMA_sTransferObject</a> **                     ppsObject,
<a name="l00990"></a>00990     IMG_INT32                                           i32Timeout
<a name="l00991"></a>00991 );
<a name="l00992"></a>00992 
<a name="l00993"></a>00993 
<a name="l01023"></a>01023 IMG_RESULT GDMA_Flush
<a name="l01024"></a>01024 (
<a name="l01025"></a>01025     <a class="code" href="structtag__gdma__context.html">GDMA_sContext</a> *                                     psContext
<a name="l01026"></a>01026 );
<a name="l01027"></a>01027 
<a name="l01028"></a>01028 
<a name="l01029"></a>01029 
<a name="l01061"></a>01061 IMG_RESULT GDMA_ReadyToStart
<a name="l01062"></a>01062 (
<a name="l01063"></a>01063     <a class="code" href="structtag__gdma__context.html">GDMA_sContext</a> *                                     psContext,
<a name="l01064"></a>01064     IMG_BOOL *                                          pbReadyToStart
<a name="l01065"></a>01065 );
<a name="l01066"></a>01066 
<a name="l01067"></a>01067 
<a name="l01094"></a>01094 IMG_RESULT GDMA_GetListState
<a name="l01095"></a>01095 (
<a name="l01096"></a>01096     <a class="code" href="structtag__gdma__context.html">GDMA_sContext</a> *                                     psContext
<a name="l01097"></a>01097 );
<a name="l01098"></a>01098 
<a name="l01099"></a>01099 
<a name="l01125"></a>01125 IMG_RESULT GDMA_GetStatus
<a name="l01126"></a>01126 (
<a name="l01127"></a>01127     <a class="code" href="structtag__gdma__context.html">GDMA_sContext</a> *                                     psContext,
<a name="l01128"></a>01128     GDMA_eState *                                       peState
<a name="l01129"></a>01129 );
<a name="l01130"></a>01130 
<a name="l01131"></a>01131 <span class="keyword">extern</span> <a class="code" href="structioblock__sBlockDescriptorTag.html">ioblock_sBlockDescriptor</a> IMG_asGDMABlock[];
<a name="l01132"></a>01132 
<a name="l01133"></a>01133 
<a name="l01134"></a>01134 <span class="preprocessor">#endif </span><span class="comment">/* __GDMA_API_H__ */</span>
</pre></div></div>
</body>
</html>
