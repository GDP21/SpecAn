<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>usbd_api.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>usbd_api.h File Reference</h1>USB Device API.  
<a href="#_details">More...</a>
<p>

<p>
<a href="usbd__api_8h-source.html">Go to the source code of this file.</a><h2>Data Structures</h2>
<ul>
<li>struct <a class="el" href="structUSBD__EVENT__CALLBACK__DATA__T__.html">USBD_EVENT_CALLBACK_DATA_T_</a>
<dl class="el"><dd class="mdescRight">This structure contains the callback data parameters.  <a href="structUSBD__EVENT__CALLBACK__DATA__T__.html#_details">More...</a><br></dl><li>struct <a class="el" href="structUSB__STRING__DESCRIPTOR__T__.html">USB_STRING_DESCRIPTOR_T_</a>
<dl class="el"><dd class="mdescRight">This types defines the string descriptor structure.  <a href="structUSB__STRING__DESCRIPTOR__T__.html#_details">More...</a><br></dl><li>struct <a class="el" href="structUSBD__POWER__ATTR__T__.html">USBD_POWER_ATTR_T_</a>
<dl class="el"><dd class="mdescRight">Structure used to specify the power attributes of the device.  <a href="structUSBD__POWER__ATTR__T__.html#_details">More...</a><br></dl><li>struct <b>USBD_CONFIGURATION_T_</b>
<li>struct <a class="el" href="structUSBD__INIT__PARAM__T__.html">USBD_INIT_PARAM_T_</a>
<dl class="el"><dd class="mdescRight">This structure contains the initialisation parameters.  <a href="structUSBD__INIT__PARAM__T__.html#_details">More...</a><br></dl><li>struct <b>usbd_ep_tag</b>
<li>struct <a class="el" href="structusbd__block__tag.html">usbd_block_tag</a>
<dl class="el"><dd class="mdescRight">This structure defines the USBD block object.  <a href="structusbd__block__tag.html#_details">More...</a><br></dl><li>struct <a class="el" href="structUSBD__IO__CALLBACK__T__.html">USBD_IO_CALLBACK_T_</a>
<dl class="el"><dd class="mdescRight">This structure defines the USBD Callback type.  <a href="structUSBD__IO__CALLBACK__T__.html#_details">More...</a><br></dl><li>struct <a class="el" href="structUSBD__IO__BLOCK__T__.html">USBD_IO_BLOCK_T_</a>
<dl class="el"><dd class="mdescRight">This structure defines the USBD I/O Block type required for asynchronous operation.  <a href="structUSBD__IO__BLOCK__T__.html#_details">More...</a><br></dl><li>struct <a class="el" href="structUSBD__ASYNC__T__.html">USBD_ASYNC_T_</a>
<dl class="el"><dd class="mdescRight">This structure defines the asynchronous I/O descriptor type.  <a href="structUSBD__ASYNC__T__.html#_details">More...</a><br></dl></ul>
<h2>Defines</h2>
<ul>
<li><a class="anchor" name="de41c07575f976c31c55c41dc1d8e8ef"></a><!-- doxytag: member="usbd_api.h::__USBD_API_H__" ref="de41c07575f976c31c55c41dc1d8e8ef" args="" -->
#define <b>__USBD_API_H__</b>
<li><a class="anchor" name="e51c3b8b8b1e9ab03e9360613027e25f"></a><!-- doxytag: member="usbd_api.h::METAG_ALL_VALUES" ref="e51c3b8b8b1e9ab03e9360613027e25f" args="" -->
#define <b>METAG_ALL_VALUES</b>
<li><a class="anchor" name="991d39e8685dcef45ddc2b9ac2c9849d"></a><!-- doxytag: member="usbd_api.h::METAC_ALL_VALUES" ref="991d39e8685dcef45ddc2b9ac2c9849d" args="" -->
#define <b>METAC_ALL_VALUES</b>
<li><a class="anchor" name="4ed87c39fcdebeedbdfc87690306c41c"></a><!-- doxytag: member="usbd_api.h::USBD_MAX_CONFIGURATIONS" ref="4ed87c39fcdebeedbdfc87690306c41c" args="" -->
#define <b>USBD_MAX_CONFIGURATIONS</b>&nbsp;&nbsp;&nbsp;2
<li>#define <a class="el" href="usbd__api_8h.html#f6f08d66864ea0d7a3b8784d6afcfd79">USBD_INF_TIMEOUT</a>&nbsp;&nbsp;&nbsp;-1
<li>#define <a class="el" href="usbd__api_8h.html#f0c7cd004fcf982869b8fb74f9197ebb">USBD_STRING_DESCRIPTOR_IDENTIFIER</a>&nbsp;&nbsp;&nbsp;(0x03)
<li><a class="anchor" name="cbcc474e6a11bd430e1f9016ab00f005"></a><!-- doxytag: member="usbd_api.h::INTERNAL_MEM_SIZE" ref="cbcc474e6a11bd430e1f9016ab00f005" args="" -->
#define <b>INTERNAL_MEM_SIZE</b>&nbsp;&nbsp;&nbsp;(7600)
</ul>
<h2>Typedefs</h2>
<ul>
<li><a class="anchor" name="27e993a64fd35986da824632d797ad90"></a><!-- doxytag: member="usbd_api.h::USBD_EVENT_CALLBACK_DATA_T" ref="27e993a64fd35986da824632d797ad90" args="" -->
typedef struct <br class="typebreak">
<a class="el" href="structUSBD__EVENT__CALLBACK__DATA__T__.html">USBD_EVENT_CALLBACK_DATA_T_</a> <a class="el" href="usbd__api_8h.html#27e993a64fd35986da824632d797ad90">USBD_EVENT_CALLBACK_DATA_T</a>
<dl class="el"><dd class="mdescRight">This structure contains the callback data parameters. <br></dl><li>typedef IMG_VOID <a class="el" href="usbd__api_8h.html#d9b49dfc12081dab67149660f0b0356f">USBD_EVENT_CALLBACK_FUNCTION_T</a> (<a class="el" href="structUSBD__EVENT__CALLBACK__DATA__T__.html">USBD_EVENT_CALLBACK_DATA_T</a> sCallbackData)
<dl class="el"><dd class="mdescRight">This type defines the Callback function used by the USBD device driver.  <a href="#d9b49dfc12081dab67149660f0b0356f"></a><br></dl><li><a class="anchor" name="9d78a98f08d8cb69d9cd5b047522b733"></a><!-- doxytag: member="usbd_api.h::USBD_STRING_DESCRIPTOR_T" ref="9d78a98f08d8cb69d9cd5b047522b733" args="" -->
typedef struct <br class="typebreak">
<a class="el" href="structUSB__STRING__DESCRIPTOR__T__.html">USB_STRING_DESCRIPTOR_T_</a> <a class="el" href="usbd__api_8h.html#9d78a98f08d8cb69d9cd5b047522b733">USBD_STRING_DESCRIPTOR_T</a>
<dl class="el"><dd class="mdescRight">This types defines the string descriptor structure. <br></dl><li>typedef struct <a class="el" href="structUSBD__POWER__ATTR__T__.html">USBD_POWER_ATTR_T_</a> <a class="el" href="usbd__api_8h.html#4a754627da5149a2d5e85e2b45a907a4">USBD_POWER_ATTR_T</a>
<dl class="el"><dd class="mdescRight">Structure used to specify the power attributes of the device.  <a href="#4a754627da5149a2d5e85e2b45a907a4"></a><br></dl><li><a class="anchor" name="c2e06fd9c1dbcf626f01491c2ddb2300"></a><!-- doxytag: member="usbd_api.h::USBD_CONFIGURATION_T" ref="c2e06fd9c1dbcf626f01491c2ddb2300" args="" -->
typedef struct <br class="typebreak">
USBD_CONFIGURATION_T_ <b>USBD_CONFIGURATION_T</b>
<li><a class="anchor" name="3bdcfdf9595723f224ad9d2f37dddfd8"></a><!-- doxytag: member="usbd_api.h::USBD_INIT_PARAM_T" ref="3bdcfdf9595723f224ad9d2f37dddfd8" args="" -->
typedef struct <a class="el" href="structUSBD__INIT__PARAM__T__.html">USBD_INIT_PARAM_T_</a> <a class="el" href="usbd__api_8h.html#3bdcfdf9595723f224ad9d2f37dddfd8">USBD_INIT_PARAM_T</a>
<dl class="el"><dd class="mdescRight">This structure contains the initialisation parameters. <br></dl><li><a class="anchor" name="2dae1927061aff63b6b8dc9c6d563517"></a><!-- doxytag: member="usbd_api.h::USBD_sEP" ref="2dae1927061aff63b6b8dc9c6d563517" args="" -->
typedef struct usbd_ep_tag <b>USBD_sEP</b>
<li><a class="anchor" name="aa572256a9d2cece8d4ba5e6d749f324"></a><!-- doxytag: member="usbd_api.h::USBD_sBlock" ref="aa572256a9d2cece8d4ba5e6d749f324" args="" -->
typedef struct <a class="el" href="structusbd__block__tag.html">usbd_block_tag</a> <a class="el" href="usbd__api_8h.html#aa572256a9d2cece8d4ba5e6d749f324">USBD_sBlock</a>
<dl class="el"><dd class="mdescRight">This structure defines the USBD block object. <br></dl><li>typedef IMG_VOID <a class="el" href="usbd__api_8h.html#bf36844addda9f76f3c001f9f12b2b87">USBD_IO_CALLBACKROUTINE_T</a> (IMG_VOID *context, IMG_UINT8 *buffer, IMG_UINT32 num_bytes_to_transfer, IMG_UINT32 status)
<dl class="el"><dd class="mdescRight">This type defines the Callback Routine used by the USBD device driver in the asynchronous transfer mode.  <a href="#bf36844addda9f76f3c001f9f12b2b87"></a><br></dl><li><a class="anchor" name="3fd377bca379d74fa4f86a2d51425fa4"></a><!-- doxytag: member="usbd_api.h::USBD_IO_CALLBACK_T" ref="3fd377bca379d74fa4f86a2d51425fa4" args="" -->
typedef struct <a class="el" href="structUSBD__IO__CALLBACK__T__.html">USBD_IO_CALLBACK_T_</a> <a class="el" href="usbd__api_8h.html#3fd377bca379d74fa4f86a2d51425fa4">USBD_IO_CALLBACK_T</a>
<dl class="el"><dd class="mdescRight">This structure defines the USBD Callback type. <br></dl><li><a class="anchor" name="711a098a36c2fb9eaffd9654a079c8ed"></a><!-- doxytag: member="usbd_api.h::USBD_IO_BLOCK_T" ref="711a098a36c2fb9eaffd9654a079c8ed" args="" -->
typedef struct <a class="el" href="structUSBD__IO__BLOCK__T__.html">USBD_IO_BLOCK_T_</a> <a class="el" href="usbd__api_8h.html#711a098a36c2fb9eaffd9654a079c8ed">USBD_IO_BLOCK_T</a>
<dl class="el"><dd class="mdescRight">This structure defines the USBD I/O Block type required for asynchronous operation. <br></dl><li><a class="anchor" name="0f0d7d23fb5560cc6816a3d166068a8e"></a><!-- doxytag: member="usbd_api.h::USBD_ASYNC_T" ref="0f0d7d23fb5560cc6816a3d166068a8e" args="" -->
typedef struct <a class="el" href="structUSBD__ASYNC__T__.html">USBD_ASYNC_T_</a> <a class="el" href="usbd__api_8h.html#0f0d7d23fb5560cc6816a3d166068a8e">USBD_ASYNC_T</a>
<dl class="el"><dd class="mdescRight">This structure defines the asynchronous I/O descriptor type. <br></dl></ul>
<h2>Enumerations</h2>
<ul>
<li>enum <a class="el" href="usbd__api_8h.html#61dde6aa35d2912927ef1b185eedaa13">USBD_EVENT_T</a> { <br>
&nbsp;&nbsp;<a class="el" href="usbd__api_8h.html#61dde6aa35d2912927ef1b185eedaa137f1c74439edb06b7d3df6f06f5ead997">USBD_EVENT_IO_OPENED</a> =  0x00000001, 
<a class="el" href="usbd__api_8h.html#61dde6aa35d2912927ef1b185eedaa13ef51a3758bf58993d1bd8884d4f488a7">USBD_EVENT_IO_CLOSED</a> =  0x00000002, 
<a class="el" href="usbd__api_8h.html#61dde6aa35d2912927ef1b185eedaa1316837a53c154c67b32978f1294b40105">USBD_EVENT_UNHANDLED_CONTROL_MESSAGE_RECEIVED</a> =  0x00000003, 
<a class="el" href="usbd__api_8h.html#61dde6aa35d2912927ef1b185eedaa136ac81f67ebffe6c0919e348a72d120e7">USBD_EVENT_UNHANDLED_CONTROL_MESSAGE_COMPLETE</a> =  0x00000004, 
<br>
&nbsp;&nbsp;<a class="el" href="usbd__api_8h.html#61dde6aa35d2912927ef1b185eedaa13f5bfd1fc8b1eb07e1de27b7ff0d52156">USBD_EVENT_CLASS_HANDLER</a> =  0x00000005
<br>
 }
<li>enum <a class="el" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02b">USBD_RETURN_T</a> { <br>
&nbsp;&nbsp;<a class="el" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02b0cc4fa06e330e2ed47db3cbc8c4e88fe">USBD_STATUS_SUCCESS</a> =  0, 
<a class="el" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02baceb887e1d094be2eb7005a14856e7c0">USBD_ERROR_NOT_INITIALISED</a>, 
<a class="el" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02bf8a148aa0bc9c51885e575cae58164a1">USBD_ERROR_INVALID_CONFIGURATION</a>, 
<a class="el" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02bcbfaa5633e74059af70bf01c769209b3">USBD_STATUS_CANCEL</a>, 
<br>
&nbsp;&nbsp;<a class="el" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02bbf433510473e70447b610c7fc5693ade">USBD_STATUS_TIMEOUT</a>, 
<a class="el" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02b7b2afa3569a37101d1797aca8a89a631">USBD_STATUS_WOULD_BLOCK</a>, 
<a class="el" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02b0f982e73140fea1f437b754b0cb50bc3">USBD_STATUS_IO_OPERATION_UNAVAILABLE</a>, 
<a class="el" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02bcf4ef87acce1fb451e0cbe4d64e6ca16">USBD_ERROR_INVALID_CHANNEL</a>
<br>
 }
</ul>
<h2>Functions</h2>
<ul>
<li><a class="el" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02b">USBD_RETURN_T</a> <a class="el" href="usbd__api_8h.html#5b4b23f204175cdf0edd00f4170735e9">USBDInit</a> (<a class="el" href="structusbd__block__tag.html">USBD_sBlock</a> *psBlock, <a class="el" href="structUSBD__INIT__PARAM__T__.html">USBD_INIT_PARAM_T</a> *initParam)
<li><a class="el" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02b">USBD_RETURN_T</a> <a class="el" href="usbd__api_8h.html#0d8e52e45c330e92a58e10125b64516e">USBDInitEP</a> (<a class="el" href="structusbd__block__tag.html">USBD_sBlock</a> *psBlock, IMG_UINT32 ui32EPNum, <a class="el" href="structUSBD__IO__BLOCK__T__.html">USBD_IO_BLOCK_T</a> *asIOBlocks, IMG_UINT32 ui32NumIOBlocks, USBD_sEP **ppsEP)
<li><a class="el" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02b">USBD_RETURN_T</a> <a class="el" href="usbd__api_8h.html#902fe6602ed14fd1fbab545f2fed57a3">USBDDeinit</a> (<a class="el" href="structusbd__block__tag.html">USBD_sBlock</a> *psBlock)
<li><a class="el" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02b">USBD_RETURN_T</a> <a class="el" href="usbd__api_8h.html#c04d8625a2675c75a08439231ff1e680">USBDRead</a> (<a class="el" href="structusbd__block__tag.html">USBD_sBlock</a> *psBlock, USBD_sEP *psEP, IMG_UINT8 *buf, IMG_UINT32 uiTransferLen, IMG_UINT32 *uiNumberOfBytesRead, <a class="el" href="structUSBD__ASYNC__T__.html">USBD_ASYNC_T</a> *async, IMG_INT32 timeout)
<li><a class="el" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02b">USBD_RETURN_T</a> <a class="el" href="usbd__api_8h.html#d1f49655256f6096e5f6d03ecb358d4f">USBDWrite</a> (<a class="el" href="structusbd__block__tag.html">USBD_sBlock</a> *psBlock, USBD_sEP *psEP, IMG_UINT8 *buf, IMG_UINT32 uiTransferLen, IMG_UINT32 *uiNumberOfBytesWritten, <a class="el" href="structUSBD__ASYNC__T__.html">USBD_ASYNC_T</a> *async, IMG_INT32 timeout)
<li>IMG_UINT32 <a class="el" href="usbd__api_8h.html#81dbdd48371c05eb705c7eeb29708188">USBDGetResult</a> (<a class="el" href="structusbd__block__tag.html">USBD_sBlock</a> *psBlock, USBD_sEP *psEP, IMG_VOID **context, IMG_UINT32 *num_bytes_transferred, IMG_INT32 block, IMG_INT32 timeout)
<li>IMG_VOID <a class="el" href="usbd__api_8h.html#8ff4a9672bc061b14f758197dcd211e7">USBDCancel</a> (<a class="el" href="structusbd__block__tag.html">USBD_sBlock</a> *psBlock, USBD_sEP *psEP)
<li><a class="el" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02b">USBD_RETURN_T</a> <a class="el" href="usbd__api_8h.html#99c857d60deecf7bce08f287c7c32496">USBD_AddEventCallback</a> (<a class="el" href="structusbd__block__tag.html">USBD_sBlock</a> *psBlock, <a class="el" href="usbd__api_8h.html#61dde6aa35d2912927ef1b185eedaa13">USBD_EVENT_T</a> eEvent, IMG_pfnEventCallback pfnEventCallback, img_void *pvCallbackParameter, IMG_hCallback *phEventCallback)
<li><a class="el" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02b">USBD_RETURN_T</a> <a class="el" href="usbd__api_8h.html#5f731c36c2cf45c4cdef65eed54edbda">USBD_ExecuteEventCallback</a> (<a class="el" href="structusbd__block__tag.html">USBD_sBlock</a> *psBlock, <a class="el" href="usbd__api_8h.html#61dde6aa35d2912927ef1b185eedaa13">USBD_EVENT_T</a> eEvent, img_uint32 ui32Param, img_void *pvParam)
</ul>
<h2>Variables</h2>
<ul>
<li><a class="anchor" name="f79fd7802e550f94dd677003e33bb3d2"></a><!-- doxytag: member="usbd_api.h::IMG_asUSBBlock" ref="f79fd7802e550f94dd677003e33bb3d2" args="[]" -->
<a class="el" href="structioblock__sBlockDescriptorTag.html">ioblock_sBlockDescriptor</a> <b>IMG_asUSBBlock</b> []
</ul>
<hr><a name="_details"></a><h2>Detailed Description</h2>
This file contains the header file information for the USB Device API.<p>
<dl class="author" compact><dt><b>Author:</b></dt><dd>Imagination Technologies</dd></dl>
<b>Copyright 2007 by Imagination Technologies Limited.</b><br>
 All rights reserved. No part of this software, either material or conceptual may be copied or distributed, transmitted, transcribed, stored in a retrieval system or translated into any human or computer language in any form by any means, electronic, mechanical, manual or other-wise, or disclosed to the third parties without the express written permission of Imagination Technologies Limited, Home Park Estate, Kings Langley, Hertfordshire, WD4 8LZ, U.K. <hr><h2>Define Documentation</h2>
<a class="anchor" name="f6f08d66864ea0d7a3b8784d6afcfd79"></a><!-- doxytag: member="usbd_api.h::USBD_INF_TIMEOUT" ref="f6f08d66864ea0d7a3b8784d6afcfd79" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USBD_INF_TIMEOUT&nbsp;&nbsp;&nbsp;-1          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Infinite wait (do not time out). 
</div>
</div><p>
<a class="anchor" name="f0c7cd004fcf982869b8fb74f9197ebb"></a><!-- doxytag: member="usbd_api.h::USBD_STRING_DESCRIPTOR_IDENTIFIER" ref="f0c7cd004fcf982869b8fb74f9197ebb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USBD_STRING_DESCRIPTOR_IDENTIFIER&nbsp;&nbsp;&nbsp;(0x03)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
USB STRING Descriptor type (Table 9-5 of USB 2.0 Spec) 
</div>
</div><p>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="d9b49dfc12081dab67149660f0b0356f"></a><!-- doxytag: member="usbd_api.h::USBD_EVENT_CALLBACK_FUNCTION_T" ref="d9b49dfc12081dab67149660f0b0356f" args="(USBD_EVENT_CALLBACK_DATA_T sCallbackData)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef IMG_VOID <a class="el" href="usbd__api_8h.html#d9b49dfc12081dab67149660f0b0356f">USBD_EVENT_CALLBACK_FUNCTION_T</a>(<a class="el" href="structUSBD__EVENT__CALLBACK__DATA__T__.html">USBD_EVENT_CALLBACK_DATA_T</a> sCallbackData)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The callback function provides a way for the device driver to notify the calling application of occurence of registered events.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sCallbackData</em>&nbsp;</td><td>Callback data parameters structure. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="4a754627da5149a2d5e85e2b45a907a4"></a><!-- doxytag: member="usbd_api.h::USBD_POWER_ATTR_T" ref="4a754627da5149a2d5e85e2b45a907a4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structUSBD__POWER__ATTR__T__.html">USBD_POWER_ATTR_T_</a>  <a class="el" href="structUSBD__POWER__ATTR__T__.html">USBD_POWER_ATTR_T</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
These are used by the driver in building up the enumeration data that will be sent to the host. 
</div>
</div><p>
<a class="anchor" name="bf36844addda9f76f3c001f9f12b2b87"></a><!-- doxytag: member="usbd_api.h::USBD_IO_CALLBACKROUTINE_T" ref="bf36844addda9f76f3c001f9f12b2b87" args="(IMG_VOID *context, IMG_UINT8 *buffer, IMG_UINT32 num_bytes_to_transfer, IMG_UINT32 status)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef IMG_VOID <a class="el" href="usbd__api_8h.html#bf36844addda9f76f3c001f9f12b2b87">USBD_IO_CALLBACKROUTINE_T</a>(IMG_VOID *context, IMG_UINT8 *buffer, IMG_UINT32 num_bytes_to_transfer, IMG_UINT32 status)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The callback function provides a way for the device driver/API to notify the calling application of data I/O completion. The driver does not require the callback function to provide any specific function, but it must not use any MeOS functions that would require a scheduling operation.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>*context</em>&nbsp;</td><td>Pointer to private context for the callback. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>*buffer</em>&nbsp;</td><td>Pointer to buffer where data was transferred to/from. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>num_bytes_to_transfer</em>&nbsp;</td><td>The number of bytes the slave was 'expecting' to transfer (this is the size of the buffer that data was transferred to/from) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>status</em>&nbsp;</td><td>Status code describing the completion status of the transaction. </td></tr>
  </table>
</dl>

</div>
</div><p>
<hr><h2>Enumeration Type Documentation</h2>
<a class="anchor" name="61dde6aa35d2912927ef1b185eedaa13"></a><!-- doxytag: member="usbd_api.h::USBD_EVENT_T" ref="61dde6aa35d2912927ef1b185eedaa13" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="usbd__api_8h.html#61dde6aa35d2912927ef1b185eedaa13">USBD_EVENT_T</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This type defines the USBD events. <dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="61dde6aa35d2912927ef1b185eedaa137f1c74439edb06b7d3df6f06f5ead997"></a><!-- doxytag: member="USBD_EVENT_IO_OPENED" ref="61dde6aa35d2912927ef1b185eedaa137f1c74439edb06b7d3df6f06f5ead997" args="" -->USBD_EVENT_IO_OPENED</em>&nbsp;</td><td>
The event indicates that connection to the host has been established and that the device is ready for reads and/or writes </td></tr>
<tr><td valign="top"><em><a class="anchor" name="61dde6aa35d2912927ef1b185eedaa13ef51a3758bf58993d1bd8884d4f488a7"></a><!-- doxytag: member="USBD_EVENT_IO_CLOSED" ref="61dde6aa35d2912927ef1b185eedaa13ef51a3758bf58993d1bd8884d4f488a7" args="" -->USBD_EVENT_IO_CLOSED</em>&nbsp;</td><td>
The event indicates that connection to the host has been lost and that the device read and write functionality is no longer available </td></tr>
<tr><td valign="top"><em><a class="anchor" name="61dde6aa35d2912927ef1b185eedaa1316837a53c154c67b32978f1294b40105"></a><!-- doxytag: member="USBD_EVENT_UNHANDLED_CONTROL_MESSAGE_RECEIVED" ref="61dde6aa35d2912927ef1b185eedaa1316837a53c154c67b32978f1294b40105" args="" -->USBD_EVENT_UNHANDLED_CONTROL_MESSAGE_RECEIVED</em>&nbsp;</td><td>
The event indicates that a control message has been received that the default driver does not know how to handle </td></tr>
<tr><td valign="top"><em><a class="anchor" name="61dde6aa35d2912927ef1b185eedaa136ac81f67ebffe6c0919e348a72d120e7"></a><!-- doxytag: member="USBD_EVENT_UNHANDLED_CONTROL_MESSAGE_COMPLETE" ref="61dde6aa35d2912927ef1b185eedaa136ac81f67ebffe6c0919e348a72d120e7" args="" -->USBD_EVENT_UNHANDLED_CONTROL_MESSAGE_COMPLETE</em>&nbsp;</td><td>
The event indicates that handling of a control message has been completed </td></tr>
<tr><td valign="top"><em><a class="anchor" name="61dde6aa35d2912927ef1b185eedaa13f5bfd1fc8b1eb07e1de27b7ff0d52156"></a><!-- doxytag: member="USBD_EVENT_CLASS_HANDLER" ref="61dde6aa35d2912927ef1b185eedaa13f5bfd1fc8b1eb07e1de27b7ff0d52156" args="" -->USBD_EVENT_CLASS_HANDLER</em>&nbsp;</td><td>
A base event for class handlers </td></tr>
</table>
</dl>

</div>
</div><p>
<a class="anchor" name="325681b7db59dc1d4959a7ff821fe02b"></a><!-- doxytag: member="usbd_api.h::USBD_RETURN_T" ref="325681b7db59dc1d4959a7ff821fe02b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02b">USBD_RETURN_T</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This type defines the USBD initialisation function return value. <dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="325681b7db59dc1d4959a7ff821fe02b0cc4fa06e330e2ed47db3cbc8c4e88fe"></a><!-- doxytag: member="USBD_STATUS_SUCCESS" ref="325681b7db59dc1d4959a7ff821fe02b0cc4fa06e330e2ed47db3cbc8c4e88fe" args="" -->USBD_STATUS_SUCCESS</em>&nbsp;</td><td>
Operation completed successfully. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="325681b7db59dc1d4959a7ff821fe02baceb887e1d094be2eb7005a14856e7c0"></a><!-- doxytag: member="USBD_ERROR_NOT_INITIALISED" ref="325681b7db59dc1d4959a7ff821fe02baceb887e1d094be2eb7005a14856e7c0" args="" -->USBD_ERROR_NOT_INITIALISED</em>&nbsp;</td><td>
The device is not initialised. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="325681b7db59dc1d4959a7ff821fe02bf8a148aa0bc9c51885e575cae58164a1"></a><!-- doxytag: member="USBD_ERROR_INVALID_CONFIGURATION" ref="325681b7db59dc1d4959a7ff821fe02bf8a148aa0bc9c51885e575cae58164a1" args="" -->USBD_ERROR_INVALID_CONFIGURATION</em>&nbsp;</td><td>
The configuration parameters are not valid. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="325681b7db59dc1d4959a7ff821fe02bcbfaa5633e74059af70bf01c769209b3"></a><!-- doxytag: member="USBD_STATUS_CANCEL" ref="325681b7db59dc1d4959a7ff821fe02bcbfaa5633e74059af70bf01c769209b3" args="" -->USBD_STATUS_CANCEL</em>&nbsp;</td><td>
Operation was cancelled. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="325681b7db59dc1d4959a7ff821fe02bbf433510473e70447b610c7fc5693ade"></a><!-- doxytag: member="USBD_STATUS_TIMEOUT" ref="325681b7db59dc1d4959a7ff821fe02bbf433510473e70447b610c7fc5693ade" args="" -->USBD_STATUS_TIMEOUT</em>&nbsp;</td><td>
Operation was timed out. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="325681b7db59dc1d4959a7ff821fe02b7b2afa3569a37101d1797aca8a89a631"></a><!-- doxytag: member="USBD_STATUS_WOULD_BLOCK" ref="325681b7db59dc1d4959a7ff821fe02b7b2afa3569a37101d1797aca8a89a631" args="" -->USBD_STATUS_WOULD_BLOCK</em>&nbsp;</td><td>
Asynchronous I/O has been requested, but the routine would need to block. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="325681b7db59dc1d4959a7ff821fe02b0f982e73140fea1f437b754b0cb50bc3"></a><!-- doxytag: member="USBD_STATUS_IO_OPERATION_UNAVAILABLE" ref="325681b7db59dc1d4959a7ff821fe02b0f982e73140fea1f437b754b0cb50bc3" args="" -->USBD_STATUS_IO_OPERATION_UNAVAILABLE</em>&nbsp;</td><td>
The requested I/O operation is unavailable in the current configuration </td></tr>
<tr><td valign="top"><em><a class="anchor" name="325681b7db59dc1d4959a7ff821fe02bcf4ef87acce1fb451e0cbe4d64e6ca16"></a><!-- doxytag: member="USBD_ERROR_INVALID_CHANNEL" ref="325681b7db59dc1d4959a7ff821fe02bcf4ef87acce1fb451e0cbe4d64e6ca16" args="" -->USBD_ERROR_INVALID_CHANNEL</em>&nbsp;</td><td>
The channel specified is invalid </td></tr>
</table>
</dl>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="5b4b23f204175cdf0edd00f4170735e9"></a><!-- doxytag: member="usbd_api.h::USBDInit" ref="5b4b23f204175cdf0edd00f4170735e9" args="(USBD_sBlock *psBlock, USBD_INIT_PARAM_T *initParam)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02b">USBD_RETURN_T</a> USBDInit           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structusbd__block__tag.html">USBD_sBlock</a> *&nbsp;</td>
          <td class="paramname"> <em>psBlock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structUSBD__INIT__PARAM__T__.html">USBD_INIT_PARAM_T</a> *&nbsp;</td>
          <td class="paramname"> <em>initParam</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Description:</b><br>
 This function is used to initialise the USB Device. It initialises the block by allocating a QIO device object to the USBD block object defined by the structure USBD_sBlock. At the completion of this function, the device is ready to be connected to the host. The application may initiate an I/O transfer after the device is successfuly connected to the host. The establishment of the connection shall be flagged via an optional event callback that the application may choose to set up through the initParam parameter to this function.<p>
This function must be called before any other USBD API function.<p>
It is not necessary to re-initialise the USBD before further transactions unless any of the parameters set up at initialisation are to be changed.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>*psBlock</em>&nbsp;</td><td>Pointer to block descriptor. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>*initParam</em>&nbsp;</td><td>Pointer to initialisation parameters.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd><a class="el" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02b0cc4fa06e330e2ed47db3cbc8c4e88fe">USBD_STATUS_SUCCESS</a> if initialisation parameters are valid </dd></dl>

</div>
</div><p>
<a class="anchor" name="0d8e52e45c330e92a58e10125b64516e"></a><!-- doxytag: member="usbd_api.h::USBDInitEP" ref="0d8e52e45c330e92a58e10125b64516e" args="(USBD_sBlock *psBlock, IMG_UINT32 ui32EPNum, USBD_IO_BLOCK_T *asIOBlocks, IMG_UINT32 ui32NumIOBlocks, USBD_sEP **ppsEP)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02b">USBD_RETURN_T</a> USBDInitEP           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structusbd__block__tag.html">USBD_sBlock</a> *&nbsp;</td>
          <td class="paramname"> <em>psBlock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IMG_UINT32&nbsp;</td>
          <td class="paramname"> <em>ui32EPNum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structUSBD__IO__BLOCK__T__.html">USBD_IO_BLOCK_T</a> *&nbsp;</td>
          <td class="paramname"> <em>asIOBlocks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IMG_UINT32&nbsp;</td>
          <td class="paramname"> <em>ui32NumIOBlocks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">USBD_sEP **&nbsp;</td>
          <td class="paramname"> <em>ppsEP</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Description:</b><br>
 This function is used to initialise an endpoint (other than endpoint 0) and must be called before an endpoint is used. Endpoint numbering is linked to the order of endpoints in an interface.<p>
This function must be called after <a class="el" href="usbd__api_8h.html#5b4b23f204175cdf0edd00f4170735e9">USBDInit()</a>.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>*psBlock</em>&nbsp;</td><td>Pointer to block structure passed to USBDInit </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ui32EPNum</em>&nbsp;</td><td>Endpoint number (&gt;=1) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>asIOBlocks</em>&nbsp;</td><td>An array of IO blocks for this endpoint </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ui32NumIOBlock</em>&nbsp;</td><td>Number of IO blocks for this endpoint </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ppsEP</em>&nbsp;</td><td>Address of a pointer that, when returned, will point to an internal USBD_sEP structure. This will be used for all read/write transfers. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="902fe6602ed14fd1fbab545f2fed57a3"></a><!-- doxytag: member="usbd_api.h::USBDDeinit" ref="902fe6602ed14fd1fbab545f2fed57a3" args="(USBD_sBlock *psBlock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02b">USBD_RETURN_T</a> USBDDeinit           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structusbd__block__tag.html">USBD_sBlock</a> *&nbsp;</td>
          <td class="paramname"> <em>psBlock</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Description:</b><br>
 This function is used to deinitialise the USB device API, and should be used as part of a safe system shutdown.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>*block</em>&nbsp;</td><td>Pointer to block descriptor.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd><a class="el" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02b0cc4fa06e330e2ed47db3cbc8c4e88fe">USBD_STATUS_SUCCESS</a> if initialisation parameters are valid </dd></dl>

</div>
</div><p>
<a class="anchor" name="c04d8625a2675c75a08439231ff1e680"></a><!-- doxytag: member="usbd_api.h::USBDRead" ref="c04d8625a2675c75a08439231ff1e680" args="(USBD_sBlock *psBlock, USBD_sEP *psEP, IMG_UINT8 *buf, IMG_UINT32 uiTransferLen, IMG_UINT32 *uiNumberOfBytesRead, USBD_ASYNC_T *async, IMG_INT32 timeout)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02b">USBD_RETURN_T</a> USBDRead           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structusbd__block__tag.html">USBD_sBlock</a> *&nbsp;</td>
          <td class="paramname"> <em>psBlock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">USBD_sEP *&nbsp;</td>
          <td class="paramname"> <em>psEP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IMG_UINT8 *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IMG_UINT32&nbsp;</td>
          <td class="paramname"> <em>uiTransferLen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IMG_UINT32 *&nbsp;</td>
          <td class="paramname"> <em>uiNumberOfBytesRead</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structUSBD__ASYNC__T__.html">USBD_ASYNC_T</a> *&nbsp;</td>
          <td class="paramname"> <em>async</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IMG_INT32&nbsp;</td>
          <td class="paramname"> <em>timeout</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Description:</b><br>
 This function is used to perform a data 'read from host' transaction on the given endpoint. When the function is called, the USBD is made ready to receive data.<p>
A DMA transfer is used to transfer data from USBD RxFIFO to memory. The USBD stores data in incrementing memory locations, starting at the address specified in the 'buf' parameter. It must be ensured that the address is 32 bit aligned and that the entire buffer is accessible through the USBD DMA controller.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>*psBlock</em>&nbsp;</td><td>Pointer to block descriptor. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>*psEP</em>&nbsp;</td><td>Pointer to endpoint structure. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>*buf</em>&nbsp;</td><td>Buffer for received data. Must be 32 bit aligned. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>uiTransferLen</em>&nbsp;</td><td>Number of bytes to be read in. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>*uiNumberOfBytesRead</em>&nbsp;</td><td>In synchronous operation indicates the number of bytes that have been read. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>*async</em>&nbsp;</td><td>Pointer to asynchronous I/O descriptor if a non-blocking transfer is required (else IMG_NULL). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>timeout</em>&nbsp;</td><td>Number of MeOS timer ticks before operation times out. Set to <a class="el" href="usbd__api_8h.html#f6f08d66864ea0d7a3b8784d6afcfd79">USBD_INF_TIMEOUT</a> for an infinite period of time. The timer starts when QIO start function is called. This parameter has the same implication for blocking and non-blocking transfers.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>This function returns as follows: <a class="el" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02b0cc4fa06e330e2ed47db3cbc8c4e88fe">USBD_STATUS_SUCCESS</a> Operation completed successfully. <a class="el" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02bf8a148aa0bc9c51885e575cae58164a1">USBD_ERROR_INVALID_CONFIGURATION</a> If any of the parameters are invalid. <a class="el" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02b0f982e73140fea1f437b754b0cb50bc3">USBD_STATUS_IO_OPERATION_UNAVAILABLE</a> If the block is not available for reading. <a class="el" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02bcbfaa5633e74059af70bf01c769209b3">USBD_STATUS_CANCEL</a> Operation was cancelled. <a class="el" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02bbf433510473e70447b610c7fc5693ade">USBD_STATUS_TIMEOUT</a> Operation timed out. </dd></dl>

</div>
</div><p>
<a class="anchor" name="d1f49655256f6096e5f6d03ecb358d4f"></a><!-- doxytag: member="usbd_api.h::USBDWrite" ref="d1f49655256f6096e5f6d03ecb358d4f" args="(USBD_sBlock *psBlock, USBD_sEP *psEP, IMG_UINT8 *buf, IMG_UINT32 uiTransferLen, IMG_UINT32 *uiNumberOfBytesWritten, USBD_ASYNC_T *async, IMG_INT32 timeout)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02b">USBD_RETURN_T</a> USBDWrite           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structusbd__block__tag.html">USBD_sBlock</a> *&nbsp;</td>
          <td class="paramname"> <em>psBlock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">USBD_sEP *&nbsp;</td>
          <td class="paramname"> <em>psEP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IMG_UINT8 *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IMG_UINT32&nbsp;</td>
          <td class="paramname"> <em>uiTransferLen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IMG_UINT32 *&nbsp;</td>
          <td class="paramname"> <em>uiNumberOfBytesWritten</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structUSBD__ASYNC__T__.html">USBD_ASYNC_T</a> *&nbsp;</td>
          <td class="paramname"> <em>async</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IMG_INT32&nbsp;</td>
          <td class="paramname"> <em>timeout</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Description:</b><br>
 This function is used to perform a data 'write to host' transaction on the given endpoint. When the function is called, the USBD is made ready to transmit data.<p>
A DMA transfer is used to transfer data from memory to the USBD TxFIFO. The USBD reads the data from incrementing memory locations, starting at the address specified in the 'buf' parameter. It must be ensured that the address is 32 bit aligned and that the entire buffer is accessible through the USBD DMA controller.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>*psBlock</em>&nbsp;</td><td>Pointer to block descriptor. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>*psEP</em>&nbsp;</td><td>Pointer to endpoint structure. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>*buf</em>&nbsp;</td><td>Buffer of data for transmission. Must be 32 bit aligned. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>uiTransferLen</em>&nbsp;</td><td>Number of bytes to be transmitted. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>*uiNumberOfBytesWritten</em>&nbsp;</td><td>In synchronous operation indicates the number of bytes that have been written. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>*async</em>&nbsp;</td><td>Pointer to asynchronous I/O descriptor if a non-blocking transfer is required (else IMG_NULL). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>timeout</em>&nbsp;</td><td>Number of MeOS timer ticks before operation times out. Set to USBD_INF_TIMEOUT for an infinite period of time. The timer starts when QIO start function is called. This parameter has the same implication for blocking and non-blocking transfers.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>This function returns as follows: <a class="el" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02b0cc4fa06e330e2ed47db3cbc8c4e88fe">USBD_STATUS_SUCCESS</a> Operation completed successfully. <a class="el" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02bf8a148aa0bc9c51885e575cae58164a1">USBD_ERROR_INVALID_CONFIGURATION</a> If any of the parameters are invalid. <a class="el" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02b0f982e73140fea1f437b754b0cb50bc3">USBD_STATUS_IO_OPERATION_UNAVAILABLE</a> If the block is not available for writing. <a class="el" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02bcbfaa5633e74059af70bf01c769209b3">USBD_STATUS_CANCEL</a> Operation was cancelled. <a class="el" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02bbf433510473e70447b610c7fc5693ade">USBD_STATUS_TIMEOUT</a> Operation timed out. </dd></dl>

</div>
</div><p>
<a class="anchor" name="81dbdd48371c05eb705c7eeb29708188"></a><!-- doxytag: member="usbd_api.h::USBDGetResult" ref="81dbdd48371c05eb705c7eeb29708188" args="(USBD_sBlock *psBlock, USBD_sEP *psEP, IMG_VOID **context, IMG_UINT32 *num_bytes_transferred, IMG_INT32 block, IMG_INT32 timeout)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">IMG_UINT32 USBDGetResult           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structusbd__block__tag.html">USBD_sBlock</a> *&nbsp;</td>
          <td class="paramname"> <em>psBlock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">USBD_sEP *&nbsp;</td>
          <td class="paramname"> <em>psEP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IMG_VOID **&nbsp;</td>
          <td class="paramname"> <em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IMG_UINT32 *&nbsp;</td>
          <td class="paramname"> <em>num_bytes_transferred</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IMG_INT32&nbsp;</td>
          <td class="paramname"> <em>block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IMG_INT32&nbsp;</td>
          <td class="paramname"> <em>timeout</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Description:</b><br>
 This function gets the result of an asynchronous I/O operation. It can be called after an USBD transaction has been carried out. The function is passed the USBD_sBlock descriptor for the block it is retrieving the result from. It returns a status code describing the way in which the transaction completed.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>*block</em>&nbsp;</td><td>Pointer to block descriptor. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>**context</em>&nbsp;</td><td>Updated with the pointer to the context of the transaction it is retrieving the result from. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>*num_bytes_transferred</em>&nbsp;</td><td>Updated with the number of bytes transferred. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>block</em>&nbsp;</td><td>Blocking flag. 1 to block, 0 not to block. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>timeout</em>&nbsp;</td><td>Timeout to use when blocking. Number of MeOS timer ticks before operation times out. Set to USBD_INF_TIMEOUT for an infinite period of time.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>This function returns as follows: <a class="el" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02b0cc4fa06e330e2ed47db3cbc8c4e88fe">USBD_STATUS_SUCCESS</a> Operation completed successfully. <a class="el" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02bcbfaa5633e74059af70bf01c769209b3">USBD_STATUS_CANCEL</a> Operation was cancelled. <a class="el" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02bbf433510473e70447b610c7fc5693ade">USBD_STATUS_TIMEOUT</a> Operation timed out. </dd></dl>

</div>
</div><p>
<a class="anchor" name="8ff4a9672bc061b14f758197dcd211e7"></a><!-- doxytag: member="usbd_api.h::USBDCancel" ref="8ff4a9672bc061b14f758197dcd211e7" args="(USBD_sBlock *psBlock, USBD_sEP *psEP)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">IMG_VOID USBDCancel           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structusbd__block__tag.html">USBD_sBlock</a> *&nbsp;</td>
          <td class="paramname"> <em>psBlock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">USBD_sEP *&nbsp;</td>
          <td class="paramname"> <em>psEP</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Description:</b><br>
 This function cancels ALL (active and pending) data transfers queued on the endpoint. The function is passed the <a class="el" href="usbd__api_8h.html#aa572256a9d2cece8d4ba5e6d749f324" title="This structure defines the USBD block object.">USBD_sBlock</a> descriptor for the transaction it is cancelling.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>*block</em>&nbsp;</td><td>Pointer to block descriptor.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>none. </dd></dl>

</div>
</div><p>
<a class="anchor" name="99c857d60deecf7bce08f287c7c32496"></a><!-- doxytag: member="usbd_api.h::USBD_AddEventCallback" ref="99c857d60deecf7bce08f287c7c32496" args="(USBD_sBlock *psBlock, USBD_EVENT_T eEvent, IMG_pfnEventCallback pfnEventCallback, img_void *pvCallbackParameter, IMG_hCallback *phEventCallback)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02b">USBD_RETURN_T</a> USBD_AddEventCallback           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structusbd__block__tag.html">USBD_sBlock</a> *&nbsp;</td>
          <td class="paramname"> <em>psBlock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="usbd__api_8h.html#61dde6aa35d2912927ef1b185eedaa13">USBD_EVENT_T</a>&nbsp;</td>
          <td class="paramname"> <em>eEvent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IMG_pfnEventCallback&nbsp;</td>
          <td class="paramname"> <em>pfnEventCallback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">img_void *&nbsp;</td>
          <td class="paramname"> <em>pvCallbackParameter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IMG_hCallback *&nbsp;</td>
          <td class="paramname"> <em>phEventCallback</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="5f731c36c2cf45c4cdef65eed54edbda"></a><!-- doxytag: member="usbd_api.h::USBD_ExecuteEventCallback" ref="5f731c36c2cf45c4cdef65eed54edbda" args="(USBD_sBlock *psBlock, USBD_EVENT_T eEvent, img_uint32 ui32Param, img_void *pvParam)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02b">USBD_RETURN_T</a> USBD_ExecuteEventCallback           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structusbd__block__tag.html">USBD_sBlock</a> *&nbsp;</td>
          <td class="paramname"> <em>psBlock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="usbd__api_8h.html#61dde6aa35d2912927ef1b185eedaa13">USBD_EVENT_T</a>&nbsp;</td>
          <td class="paramname"> <em>eEvent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">img_uint32&nbsp;</td>
          <td class="paramname"> <em>ui32Param</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">img_void *&nbsp;</td>
          <td class="paramname"> <em>pvParam</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
</div>
</body>
</html>
