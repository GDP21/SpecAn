<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>usbd_api.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<h1>usbd_api.h</h1><a href="usbd__api_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00024"></a>00024 <span class="preprocessor">#if !defined (__USBD_API_H__)</span>
<a name="l00025"></a>00025 <span class="preprocessor"></span><span class="preprocessor">#define __USBD_API_H__</span>
<a name="l00026"></a>00026 <span class="preprocessor"></span>
<a name="l00027"></a>00027 <span class="comment">/******************************************************************************</span>
<a name="l00028"></a>00028 <span class="comment">**************************** Included header files ****************************</span>
<a name="l00029"></a>00029 <span class="comment">*******************************************************************************/</span>
<a name="l00030"></a>00030 
<a name="l00031"></a>00031 <span class="preprocessor">#define METAG_ALL_VALUES</span>
<a name="l00032"></a>00032 <span class="preprocessor"></span><span class="preprocessor">#define METAC_ALL_VALUES</span>
<a name="l00033"></a>00033 <span class="preprocessor"></span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &lt;metag/machine.inc&gt;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &lt;metag/metagtbi.h&gt;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &lt;MeOS.h&gt;</span>
<a name="l00037"></a>00037 
<a name="l00038"></a>00038 <span class="preprocessor">#include &lt;img_defs.h&gt;</span>
<a name="l00039"></a>00039 <span class="preprocessor">#if !defined (USBD_NO_CBMAN_SUPPORT)</span>
<a name="l00040"></a>00040 <span class="preprocessor"></span><span class="preprocessor">#include &lt;img_common.h&gt;</span>
<a name="l00041"></a>00041 <span class="preprocessor">#endif</span>
<a name="l00042"></a>00042 <span class="preprocessor"></span>
<a name="l00043"></a>00043 <span class="preprocessor">#include &lt;usb_spec.h&gt;</span>
<a name="l00044"></a>00044 
<a name="l00045"></a>00045 <span class="comment">/******************************************************************************</span>
<a name="l00046"></a>00046 <span class="comment">******************************** Enumerations *********************************</span>
<a name="l00047"></a>00047 <span class="comment">*******************************************************************************/</span>
<a name="l00048"></a>00048 <span class="preprocessor">#define USBD_MAX_CONFIGURATIONS                 2 </span><span class="comment">/* Maximum number of configurations supported by API */</span>
<a name="l00049"></a>00049 
<a name="l00056"></a><a class="code" href="usbd__api_8h.html#61dde6aa35d2912927ef1b185eedaa13">00056</a> <span class="keyword">typedef</span> <span class="keyword">enum</span>
<a name="l00057"></a>00057 {
<a name="l00059"></a><a class="code" href="usbd__api_8h.html#61dde6aa35d2912927ef1b185eedaa137f1c74439edb06b7d3df6f06f5ead997">00059</a>     <a class="code" href="usbd__api_8h.html#61dde6aa35d2912927ef1b185eedaa137f1c74439edb06b7d3df6f06f5ead997">USBD_EVENT_IO_OPENED</a>                                                = 0x00000001,
<a name="l00061"></a><a class="code" href="usbd__api_8h.html#61dde6aa35d2912927ef1b185eedaa13ef51a3758bf58993d1bd8884d4f488a7">00061</a>     <a class="code" href="usbd__api_8h.html#61dde6aa35d2912927ef1b185eedaa13ef51a3758bf58993d1bd8884d4f488a7">USBD_EVENT_IO_CLOSED</a>                                        = 0x00000002,
<a name="l00063"></a><a class="code" href="usbd__api_8h.html#61dde6aa35d2912927ef1b185eedaa1316837a53c154c67b32978f1294b40105">00063</a>     <a class="code" href="usbd__api_8h.html#61dde6aa35d2912927ef1b185eedaa1316837a53c154c67b32978f1294b40105">USBD_EVENT_UNHANDLED_CONTROL_MESSAGE_RECEIVED</a>       = 0x00000003,
<a name="l00065"></a><a class="code" href="usbd__api_8h.html#61dde6aa35d2912927ef1b185eedaa136ac81f67ebffe6c0919e348a72d120e7">00065</a>     <a class="code" href="usbd__api_8h.html#61dde6aa35d2912927ef1b185eedaa136ac81f67ebffe6c0919e348a72d120e7">USBD_EVENT_UNHANDLED_CONTROL_MESSAGE_COMPLETE</a>       = 0x00000004,
<a name="l00067"></a><a class="code" href="usbd__api_8h.html#61dde6aa35d2912927ef1b185eedaa13f5bfd1fc8b1eb07e1de27b7ff0d52156">00067</a>         <a class="code" href="usbd__api_8h.html#61dde6aa35d2912927ef1b185eedaa13f5bfd1fc8b1eb07e1de27b7ff0d52156">USBD_EVENT_CLASS_HANDLER</a>                                                = 0x00000005
<a name="l00068"></a>00068 } <a class="code" href="usbd__api_8h.html#61dde6aa35d2912927ef1b185eedaa13">USBD_EVENT_T</a>;
<a name="l00069"></a>00069 
<a name="l00070"></a>00070 
<a name="l00077"></a><a class="code" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02b">00077</a> <span class="keyword">typedef</span> <span class="keyword">enum</span>
<a name="l00078"></a>00078 {
<a name="l00080"></a><a class="code" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02b0cc4fa06e330e2ed47db3cbc8c4e88fe">00080</a>     <a class="code" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02b0cc4fa06e330e2ed47db3cbc8c4e88fe">USBD_STATUS_SUCCESS</a> = 0,
<a name="l00081"></a>00081 
<a name="l00083"></a><a class="code" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02baceb887e1d094be2eb7005a14856e7c0">00083</a>     <a class="code" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02baceb887e1d094be2eb7005a14856e7c0">USBD_ERROR_NOT_INITIALISED</a>,
<a name="l00084"></a>00084 
<a name="l00086"></a><a class="code" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02bf8a148aa0bc9c51885e575cae58164a1">00086</a>     <a class="code" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02bf8a148aa0bc9c51885e575cae58164a1">USBD_ERROR_INVALID_CONFIGURATION</a>,
<a name="l00087"></a>00087 
<a name="l00089"></a><a class="code" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02bcbfaa5633e74059af70bf01c769209b3">00089</a>     <a class="code" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02bcbfaa5633e74059af70bf01c769209b3">USBD_STATUS_CANCEL</a>,
<a name="l00090"></a>00090 
<a name="l00092"></a><a class="code" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02bbf433510473e70447b610c7fc5693ade">00092</a>     <a class="code" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02bbf433510473e70447b610c7fc5693ade">USBD_STATUS_TIMEOUT</a>,
<a name="l00093"></a>00093 
<a name="l00095"></a><a class="code" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02b7b2afa3569a37101d1797aca8a89a631">00095</a>     <a class="code" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02b7b2afa3569a37101d1797aca8a89a631">USBD_STATUS_WOULD_BLOCK</a>,
<a name="l00096"></a>00096 
<a name="l00098"></a><a class="code" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02b0f982e73140fea1f437b754b0cb50bc3">00098</a>     <a class="code" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02b0f982e73140fea1f437b754b0cb50bc3">USBD_STATUS_IO_OPERATION_UNAVAILABLE</a>,
<a name="l00099"></a>00099 
<a name="l00101"></a><a class="code" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02bcf4ef87acce1fb451e0cbe4d64e6ca16">00101</a>         <a class="code" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02bcf4ef87acce1fb451e0cbe4d64e6ca16">USBD_ERROR_INVALID_CHANNEL</a>
<a name="l00102"></a>00102 
<a name="l00103"></a>00103 } <a class="code" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02b">USBD_RETURN_T</a>;
<a name="l00104"></a>00104 
<a name="l00105"></a>00105 <span class="comment">/******************************************************************************</span>
<a name="l00106"></a>00106 <span class="comment">****************************** End enumerations *******************************</span>
<a name="l00107"></a>00107 <span class="comment">*******************************************************************************/</span>
<a name="l00108"></a>00108 
<a name="l00109"></a>00109 
<a name="l00110"></a>00110 <span class="comment">/******************************************************************************</span>
<a name="l00111"></a>00111 <span class="comment">**************************** Constant definitions *****************************</span>
<a name="l00112"></a>00112 <span class="comment">*******************************************************************************/</span>
<a name="l00113"></a>00113 
<a name="l00115"></a><a class="code" href="usbd__api_8h.html#f6f08d66864ea0d7a3b8784d6afcfd79">00115</a> <span class="preprocessor">#define USBD_INF_TIMEOUT -1</span>
<a name="l00116"></a>00116 <span class="preprocessor"></span>
<a name="l00117"></a>00117 <span class="comment">/******************************************************************************</span>
<a name="l00118"></a>00118 <span class="comment">************************** End constant definitions ***************************</span>
<a name="l00119"></a>00119 <span class="comment">*******************************************************************************/</span>
<a name="l00120"></a>00120 
<a name="l00121"></a>00121 
<a name="l00122"></a>00122 
<a name="l00123"></a>00123 <span class="comment">/******************************************************************************</span>
<a name="l00124"></a>00124 <span class="comment">****************************** Type definitions *******************************</span>
<a name="l00125"></a>00125 <span class="comment">*******************************************************************************/</span>
<a name="l00126"></a>00126 
<a name="l00133"></a><a class="code" href="structUSBD__EVENT__CALLBACK__DATA__T__.html">00133</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structUSBD__EVENT__CALLBACK__DATA__T__.html" title="This structure contains the callback data parameters.">USBD_EVENT_CALLBACK_DATA_T_</a>
<a name="l00134"></a>00134 {
<a name="l00136"></a><a class="code" href="structUSBD__EVENT__CALLBACK__DATA__T__.html#98a042f04930c3c63efb2b1b44005f2c">00136</a>     IMG_UINT32      <a class="code" href="structUSBD__EVENT__CALLBACK__DATA__T__.html#98a042f04930c3c63efb2b1b44005f2c">uiEvent</a>;
<a name="l00137"></a>00137 
<a name="l00139"></a><a class="code" href="structUSBD__EVENT__CALLBACK__DATA__T__.html#12dfc6f0208d8d1fddbe13b1e7e6faf0">00139</a>     IMG_VOID *      <a class="code" href="structUSBD__EVENT__CALLBACK__DATA__T__.html#12dfc6f0208d8d1fddbe13b1e7e6faf0">pData</a>;
<a name="l00140"></a>00140 
<a name="l00141"></a>00141 } <a class="code" href="structUSBD__EVENT__CALLBACK__DATA__T__.html" title="This structure contains the callback data parameters.">USBD_EVENT_CALLBACK_DATA_T</a>;
<a name="l00142"></a>00142 
<a name="l00143"></a>00143 
<a name="l00155"></a><a class="code" href="usbd__api_8h.html#d9b49dfc12081dab67149660f0b0356f">00155</a> <span class="keyword">typedef</span> IMG_VOID <a class="code" href="usbd__api_8h.html#d9b49dfc12081dab67149660f0b0356f" title="This type defines the Callback function used by the USBD device driver.">USBD_EVENT_CALLBACK_FUNCTION_T</a> ( <a class="code" href="structUSBD__EVENT__CALLBACK__DATA__T__.html" title="This structure contains the callback data parameters.">USBD_EVENT_CALLBACK_DATA_T</a> sCallbackData );
<a name="l00156"></a>00156 
<a name="l00158"></a><a class="code" href="usbd__api_8h.html#f0c7cd004fcf982869b8fb74f9197ebb">00158</a> <span class="preprocessor">#define USBD_STRING_DESCRIPTOR_IDENTIFIER   (0x03)</span>
<a name="l00159"></a>00159 <span class="preprocessor"></span>
<a name="l00164"></a><a class="code" href="structUSB__STRING__DESCRIPTOR__T__.html">00164</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structUSB__STRING__DESCRIPTOR__T__.html" title="This types defines the string descriptor structure.">USB_STRING_DESCRIPTOR_T_</a>
<a name="l00165"></a>00165 {
<a name="l00166"></a>00166     IMG_UINT8  bLength;
<a name="l00167"></a>00167     IMG_UINT8  bDescriptorType;
<a name="l00168"></a>00168     IMG_UINT16 wString[1];
<a name="l00169"></a>00169 
<a name="l00170"></a>00170 } <a class="code" href="structUSB__STRING__DESCRIPTOR__T__.html" title="This types defines the string descriptor structure.">USBD_STRING_DESCRIPTOR_T</a>;
<a name="l00171"></a>00171 
<a name="l00172"></a>00172 <span class="comment">/* Exclude from doxygen documentation */</span>
<a name="l00173"></a>00173 <span class="preprocessor">#ifndef DOXYGEN_WILL_SEE_THIS</span>
<a name="l00174"></a>00174 <span class="preprocessor"></span>
<a name="l00176"></a>00176 <span class="preprocessor">#define USBD_STRING_DESCRIPTOR_DEF(Length) \</span>
<a name="l00177"></a>00177 <span class="preprocessor">    IMG_UINT8  bLength;               \</span>
<a name="l00178"></a>00178 <span class="preprocessor">    IMG_UINT8  bDescriptorType;       \</span>
<a name="l00179"></a>00179 <span class="preprocessor">    IMG_UINT16 bString[Length];</span>
<a name="l00180"></a>00180 <span class="preprocessor"></span>
<a name="l00181"></a>00181 
<a name="l00183"></a>00183 <span class="preprocessor">#define USBD_STRING_DESCRIPTOR_LENGTH(Length) (2 + 2*(Length))</span>
<a name="l00184"></a>00184 <span class="preprocessor"></span>
<a name="l00185"></a>00185 
<a name="l00186"></a>00186 <span class="comment">/* Macro that works out the length of an ANSI String */</span>
<a name="l00187"></a>00187 <span class="preprocessor">#define USBD_STRING_LEN(AnsiString) (sizeof(AnsiString) - 1)</span>
<a name="l00188"></a>00188 <span class="preprocessor"></span>
<a name="l00189"></a>00189 <span class="preprocessor">#endif  </span><span class="comment">/* DOXYGEN_WILL_SEE_THIS */</span>
<a name="l00190"></a>00190 
<a name="l00201"></a><a class="code" href="structUSBD__POWER__ATTR__T__.html">00201</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structUSBD__POWER__ATTR__T__.html" title="Structure used to specify the power attributes of the device.">USBD_POWER_ATTR_T_</a>
<a name="l00202"></a>00202 {
<a name="l00204"></a><a class="code" href="structUSBD__POWER__ATTR__T__.html#b670b9a89956bb7f8925748ac2ecf360">00204</a>         IMG_BOOL        <a class="code" href="structUSBD__POWER__ATTR__T__.html#b670b9a89956bb7f8925748ac2ecf360">bSelfPowered</a>;
<a name="l00205"></a>00205 
<a name="l00207"></a><a class="code" href="structUSBD__POWER__ATTR__T__.html#f0c57c6ba926e76887fac755eb633ba7">00207</a>         IMG_UINT32      <a class="code" href="structUSBD__POWER__ATTR__T__.html#f0c57c6ba926e76887fac755eb633ba7">ui32MaxPower</a>;
<a name="l00208"></a>00208 
<a name="l00209"></a>00209 } <a class="code" href="structUSBD__POWER__ATTR__T__.html" title="Structure used to specify the power attributes of the device.">USBD_POWER_ATTR_T</a>;
<a name="l00210"></a>00210 
<a name="l00211"></a>00211 <span class="keyword">typedef</span> <span class="keyword">struct </span>USBD_CONFIGURATION_T_
<a name="l00212"></a>00212 {
<a name="l00213"></a>00213         IMG_VOID        *       apvConfigDescriptorFullSpeed[ USBD_MAX_CONFIGURATIONS ];
<a name="l00214"></a>00214         IMG_VOID        *       apvConfigDescriptorHighSpeed[ USBD_MAX_CONFIGURATIONS ];
<a name="l00215"></a>00215         IMG_UINT8               ui8NumConfigurations;
<a name="l00216"></a>00216 } USBD_CONFIGURATION_T;
<a name="l00217"></a>00217 
<a name="l00224"></a><a class="code" href="structUSBD__INIT__PARAM__T__.html">00224</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structUSBD__INIT__PARAM__T__.html" title="This structure contains the initialisation parameters.">USBD_INIT_PARAM_T_</a>
<a name="l00225"></a>00225 {
<a name="l00227"></a><a class="code" href="structUSBD__INIT__PARAM__T__.html#e702c6a6efe67842eb13233a04f46771">00227</a>         USB_DEVICE_DESCRIPTOR                   *       <a class="code" href="structUSBD__INIT__PARAM__T__.html#e702c6a6efe67842eb13233a04f46771">psDeviceDescriptor</a>;
<a name="l00228"></a>00228         USB_QUALIFIER_DESCRIPTOR                *       psQualifierDescriptor;
<a name="l00229"></a>00229         USBD_CONFIGURATION_T                    *       psConfigDescriptors;
<a name="l00230"></a>00230 
<a name="l00233"></a><a class="code" href="structUSBD__INIT__PARAM__T__.html#aeb6904633b0a3510865d19dfba487f2">00233</a>     <a class="code" href="structUSB__STRING__DESCRIPTOR__T__.html" title="This types defines the string descriptor structure.">USBD_STRING_DESCRIPTOR_T</a> **                 <a class="code" href="structUSBD__INIT__PARAM__T__.html#aeb6904633b0a3510865d19dfba487f2">ppsStrings</a>;
<a name="l00234"></a>00234 
<a name="l00236"></a><a class="code" href="structUSBD__INIT__PARAM__T__.html#db241ab620cc300d400790d831caedc0">00236</a>         <a class="code" href="structUSBD__POWER__ATTR__T__.html" title="Structure used to specify the power attributes of the device.">USBD_POWER_ATTR_T</a>                                       <a class="code" href="structUSBD__INIT__PARAM__T__.html#db241ab620cc300d400790d831caedc0">sUsbdPower</a>;
<a name="l00237"></a>00237 
<a name="l00239"></a><a class="code" href="structUSBD__INIT__PARAM__T__.html#aeb354d978a3a3a54ec94666fcb274e8">00239</a>     IMG_INT32                                                   <a class="code" href="structUSBD__INIT__PARAM__T__.html#aeb354d978a3a3a54ec94666fcb274e8">iSoftReconnect</a>; 
<a name="l00240"></a>00240 
<a name="l00241"></a>00241 <span class="preprocessor">#if defined (USBD_NO_CBMAN_SUPPORT)</span>
<a name="l00242"></a>00242 <span class="preprocessor"></span>
<a name="l00243"></a>00243     <a class="code" href="usbd__api_8h.html#d9b49dfc12081dab67149660f0b0356f" title="This type defines the Callback function used by the USBD device driver.">USBD_EVENT_CALLBACK_FUNCTION_T</a> *    pfCallbackFunc;
<a name="l00244"></a>00244 
<a name="l00246"></a>00246     IMG_UINT32                                                  uiCallbackEvents;
<a name="l00247"></a>00247 <span class="preprocessor">#endif</span>
<a name="l00248"></a>00248 <span class="preprocessor"></span>
<a name="l00249"></a><a class="code" href="structUSBD__INIT__PARAM__T__.html#b9f2a88b8544c29747097a7fad6bedf1">00249</a>         img_uint32                                                      <a class="code" href="structUSBD__INIT__PARAM__T__.html#b9f2a88b8544c29747097a7fad6bedf1">ui32BlockIndex</a>;
<a name="l00250"></a>00250 
<a name="l00252"></a><a class="code" href="structUSBD__INIT__PARAM__T__.html#ff9527d8b9e1c6c674ece653a4306789">00252</a>         IMG_INT32                                                       <a class="code" href="structUSBD__INIT__PARAM__T__.html#ff9527d8b9e1c6c674ece653a4306789">iForceDeviceMode</a>;
<a name="l00253"></a>00253 
<a name="l00256"></a><a class="code" href="structUSBD__INIT__PARAM__T__.html#60fb26e1218579e676cf724c919f8ac4">00256</a>         IMG_INT32                                                       <a class="code" href="structUSBD__INIT__PARAM__T__.html#60fb26e1218579e676cf724c919f8ac4">iEnableZLP</a>;
<a name="l00257"></a>00257 
<a name="l00259"></a><a class="code" href="structUSBD__INIT__PARAM__T__.html#050e65fcd66b6b424460472185bface8">00259</a>         USB_DEVICE_SPEED                                        <a class="code" href="structUSBD__INIT__PARAM__T__.html#050e65fcd66b6b424460472185bface8">EnumerateSpeed</a>;
<a name="l00260"></a>00260 
<a name="l00262"></a><a class="code" href="structUSBD__INIT__PARAM__T__.html#8c0b4fcc18bdd0927820be764a54dd60">00262</a>         IMG_BOOL                                                        <a class="code" href="structUSBD__INIT__PARAM__T__.html#8c0b4fcc18bdd0927820be764a54dd60">bMainInit</a>;
<a name="l00263"></a>00263 
<a name="l00264"></a>00264 } <a class="code" href="structUSBD__INIT__PARAM__T__.html" title="This structure contains the initialisation parameters.">USBD_INIT_PARAM_T</a>;
<a name="l00265"></a>00265 
<a name="l00266"></a>00266 
<a name="l00267"></a>00267 
<a name="l00268"></a>00268 <span class="keyword">typedef</span> <span class="keyword">struct </span>usbd_ep_tag
<a name="l00269"></a>00269 {
<a name="l00271"></a>00271         QIO_DEVICE_T                            sDevice;
<a name="l00272"></a>00272 
<a name="l00274"></a>00274     KRN_POOL_T                                  sIOBlockPool;
<a name="l00275"></a>00275 
<a name="l00277"></a>00277     KRN_MAILBOX_T                               sMailbox;
<a name="l00278"></a>00278 
<a name="l00280"></a>00280         IMG_BOOL                                        bInitialised;
<a name="l00281"></a>00281 
<a name="l00283"></a>00283         IMG_BOOL                                        bCancel;
<a name="l00284"></a>00284 
<a name="l00285"></a>00285         <span class="comment">/* Current IO */</span>
<a name="l00286"></a>00286         QIO_IOPARS_T                    *       psCurrentIo;
<a name="l00287"></a>00287 
<a name="l00288"></a>00288         <span class="comment">/* EP Direction */</span>
<a name="l00289"></a>00289         IMG_BOOL                                        bIsIn;
<a name="l00290"></a>00290 
<a name="l00291"></a>00291         <span class="comment">/* EP Descriptor */</span>
<a name="l00292"></a>00292         IMG_VOID                                *       pvEP;
<a name="l00293"></a>00293 
<a name="l00294"></a>00294         <span class="comment">/* EP Transfer Status */</span>
<a name="l00295"></a>00295         IMG_UINT32                                      ui32XferStatus;
<a name="l00296"></a>00296 
<a name="l00297"></a>00297 } USBD_sEP;
<a name="l00298"></a>00298 
<a name="l00299"></a>00299 
<a name="l00306"></a><a class="code" href="structusbd__block__tag.html">00306</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structusbd__block__tag.html" title="This structure defines the USBD block object.">usbd_block_tag</a>
<a name="l00307"></a>00307 {
<a name="l00308"></a>00308         QIO_DEVICE_T                            sMainDevice;
<a name="l00309"></a>00309 
<a name="l00310"></a>00310 <span class="preprocessor">#define INTERNAL_MEM_SIZE       (7600)</span>
<a name="l00311"></a>00311 <span class="preprocessor"></span>        <span class="comment">/* Memory for internal driver structures */</span>
<a name="l00312"></a>00312         img_uint8                                       aui8InternalMem[INTERNAL_MEM_SIZE];
<a name="l00313"></a>00313 
<a name="l00314"></a>00314 } <a class="code" href="structusbd__block__tag.html" title="This structure defines the USBD block object.">USBD_sBlock</a>;
<a name="l00315"></a>00315 
<a name="l00336"></a><a class="code" href="usbd__api_8h.html#bf36844addda9f76f3c001f9f12b2b87">00336</a> <span class="keyword">typedef</span> IMG_VOID <a class="code" href="usbd__api_8h.html#bf36844addda9f76f3c001f9f12b2b87" title="This type defines the Callback Routine used by the USBD device driver in the asynchronous...">USBD_IO_CALLBACKROUTINE_T</a>( IMG_VOID *  context,
<a name="l00337"></a>00337                                             IMG_UINT8 * buffer,
<a name="l00338"></a>00338                                             IMG_UINT32  num_bytes_to_transfer,
<a name="l00339"></a>00339                                             IMG_UINT32  status);
<a name="l00340"></a>00340 
<a name="l00341"></a>00341 
<a name="l00342"></a>00342 
<a name="l00349"></a><a class="code" href="structUSBD__IO__CALLBACK__T__.html">00349</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structUSBD__IO__CALLBACK__T__.html" title="This structure defines the USBD Callback type.">USBD_IO_CALLBACK_T_</a>
<a name="l00350"></a>00350 {
<a name="l00352"></a><a class="code" href="structUSBD__IO__CALLBACK__T__.html#cfe1e9af23ab42a009cad5ef6c4db152">00352</a>     <a class="code" href="usbd__api_8h.html#bf36844addda9f76f3c001f9f12b2b87" title="This type defines the Callback Routine used by the USBD device driver in the asynchronous...">USBD_IO_CALLBACKROUTINE_T</a> *     <a class="code" href="structUSBD__IO__CALLBACK__T__.html#cfe1e9af23ab42a009cad5ef6c4db152">routine</a>;
<a name="l00353"></a>00353 
<a name="l00355"></a><a class="code" href="structUSBD__IO__CALLBACK__T__.html#1b33ea7ce309783c39f6d15331753fe0">00355</a>     IMG_VOID *                      <a class="code" href="structUSBD__IO__CALLBACK__T__.html#1b33ea7ce309783c39f6d15331753fe0">context</a>;
<a name="l00356"></a>00356 
<a name="l00357"></a>00357 } <a class="code" href="structUSBD__IO__CALLBACK__T__.html" title="This structure defines the USBD Callback type.">USBD_IO_CALLBACK_T</a>;
<a name="l00358"></a>00358 
<a name="l00359"></a>00359 
<a name="l00360"></a>00360 
<a name="l00368"></a><a class="code" href="structUSBD__IO__BLOCK__T__.html">00368</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structUSBD__IO__BLOCK__T__.html" title="This structure defines the USBD I/O Block type required for asynchronous operation...">USBD_IO_BLOCK_T_</a>
<a name="l00369"></a>00369 {
<a name="l00371"></a><a class="code" href="structUSBD__IO__BLOCK__T__.html#05e65e8ce954504a96e9703d4c422a30">00371</a>     <a class="code" href="structUSBD__IO__BLOCK__T__.html#05e65e8ce954504a96e9703d4c422a30">KRN_POOLLINK</a>;
<a name="l00372"></a>00372 
<a name="l00374"></a><a class="code" href="structUSBD__IO__BLOCK__T__.html#2ec619904bc4b55020ba7d1f720371a3">00374</a>     QIO_IOCB_T          <a class="code" href="structUSBD__IO__BLOCK__T__.html#2ec619904bc4b55020ba7d1f720371a3">iocb</a>;
<a name="l00375"></a>00375 
<a name="l00377"></a><a class="code" href="structUSBD__IO__BLOCK__T__.html#a5038776de53046a29783963da0b92a9">00377</a>     <a class="code" href="structUSBD__IO__CALLBACK__T__.html" title="This structure defines the USBD Callback type.">USBD_IO_CALLBACK_T</a>  <a class="code" href="structUSBD__IO__BLOCK__T__.html#a5038776de53046a29783963da0b92a9">callback</a>;
<a name="l00378"></a>00378 
<a name="l00379"></a>00379 } <a class="code" href="structUSBD__IO__BLOCK__T__.html" title="This structure defines the USBD I/O Block type required for asynchronous operation...">USBD_IO_BLOCK_T</a>;
<a name="l00380"></a>00380 
<a name="l00381"></a>00381 
<a name="l00382"></a>00382 
<a name="l00383"></a>00383 
<a name="l00390"></a><a class="code" href="structUSBD__ASYNC__T__.html">00390</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structUSBD__ASYNC__T__.html" title="This structure defines the asynchronous I/O descriptor type.">USBD_ASYNC_T_</a>
<a name="l00391"></a>00391 {
<a name="l00396"></a><a class="code" href="structUSBD__ASYNC__T__.html#d41469a7d01f50220c03957f87a903dd">00396</a>     IMG_INT32                   <a class="code" href="structUSBD__ASYNC__T__.html#d41469a7d01f50220c03957f87a903dd">iUsingCallback</a>;
<a name="l00397"></a>00397 
<a name="l00399"></a><a class="code" href="structUSBD__ASYNC__T__.html#9fd08e9d4ba809bf2a18c305f8c3d883">00399</a>     <a class="code" href="usbd__api_8h.html#bf36844addda9f76f3c001f9f12b2b87" title="This type defines the Callback Routine used by the USBD device driver in the asynchronous...">USBD_IO_CALLBACKROUTINE_T</a> * <a class="code" href="structUSBD__ASYNC__T__.html#9fd08e9d4ba809bf2a18c305f8c3d883">callback_routine</a>;
<a name="l00400"></a>00400 
<a name="l00402"></a><a class="code" href="structUSBD__ASYNC__T__.html#46ebad6faced9840dc4f744807d1061c">00402</a>     IMG_VOID *                  <a class="code" href="structUSBD__ASYNC__T__.html#46ebad6faced9840dc4f744807d1061c">callback_context</a>;
<a name="l00403"></a>00403 
<a name="l00404"></a>00404 } <a class="code" href="structUSBD__ASYNC__T__.html" title="This structure defines the asynchronous I/O descriptor type.">USBD_ASYNC_T</a>;
<a name="l00405"></a>00405 
<a name="l00406"></a>00406 <span class="comment">/******************************************************************************</span>
<a name="l00407"></a>00407 <span class="comment">**************************** End type definitions *****************************</span>
<a name="l00408"></a>00408 <span class="comment">*******************************************************************************/</span>
<a name="l00409"></a>00409 
<a name="l00410"></a>00410 
<a name="l00411"></a>00411 <span class="comment">/******************************************************************************</span>
<a name="l00412"></a>00412 <span class="comment">**************************** Function definitions *****************************</span>
<a name="l00413"></a>00413 <span class="comment">*******************************************************************************/</span>
<a name="l00414"></a>00414 
<a name="l00440"></a>00440 <a class="code" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02b">USBD_RETURN_T</a> <a class="code" href="usbd__api_8h.html#5b4b23f204175cdf0edd00f4170735e9">USBDInit</a> (
<a name="l00441"></a>00441     <a class="code" href="structusbd__block__tag.html" title="This structure defines the USBD block object.">USBD_sBlock</a>                 *       psBlock,
<a name="l00442"></a>00442     <a class="code" href="structUSBD__INIT__PARAM__T__.html" title="This structure contains the initialisation parameters.">USBD_INIT_PARAM_T</a>   *       initParam
<a name="l00443"></a>00443 );
<a name="l00444"></a>00444 
<a name="l00466"></a>00466 <a class="code" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02b">USBD_RETURN_T</a> <a class="code" href="usbd__api_8h.html#0d8e52e45c330e92a58e10125b64516e">USBDInitEP</a>(
<a name="l00467"></a>00467         <a class="code" href="structusbd__block__tag.html" title="This structure defines the USBD block object.">USBD_sBlock</a>                     *       psBlock,
<a name="l00468"></a>00468         IMG_UINT32                              ui32EPNum,
<a name="l00469"></a>00469         <a class="code" href="structUSBD__IO__BLOCK__T__.html" title="This structure defines the USBD I/O Block type required for asynchronous operation...">USBD_IO_BLOCK_T</a>         *       asIOBlocks,
<a name="l00470"></a>00470         IMG_UINT32                              ui32NumIOBlocks,
<a name="l00471"></a>00471         USBD_sEP                        **      ppsEP
<a name="l00472"></a>00472 );
<a name="l00473"></a>00473 
<a name="l00488"></a>00488 <a class="code" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02b">USBD_RETURN_T</a> <a class="code" href="usbd__api_8h.html#902fe6602ed14fd1fbab545f2fed57a3">USBDDeinit</a> (        
<a name="l00489"></a>00489         <a class="code" href="structusbd__block__tag.html" title="This structure defines the USBD block object.">USBD_sBlock</a>                     *       psBlock
<a name="l00490"></a>00490 );
<a name="l00491"></a>00491 
<a name="l00492"></a>00492 
<a name="l00531"></a>00531 <a class="code" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02b">USBD_RETURN_T</a> <a class="code" href="usbd__api_8h.html#c04d8625a2675c75a08439231ff1e680">USBDRead</a>  (
<a name="l00532"></a>00532     <a class="code" href="structusbd__block__tag.html" title="This structure defines the USBD block object.">USBD_sBlock</a>         *   psBlock,
<a name="l00533"></a>00533         USBD_sEP                *       psEP,
<a name="l00534"></a>00534     IMG_UINT8           *       buf, 
<a name="l00535"></a>00535     IMG_UINT32                  uiTransferLen, 
<a name="l00536"></a>00536     IMG_UINT32          *       uiNumberOfBytesRead, 
<a name="l00537"></a>00537     <a class="code" href="structUSBD__ASYNC__T__.html" title="This structure defines the asynchronous I/O descriptor type.">USBD_ASYNC_T</a>        *       async, 
<a name="l00538"></a>00538     IMG_INT32                   timeout
<a name="l00539"></a>00539 );
<a name="l00540"></a>00540 
<a name="l00541"></a>00541 
<a name="l00580"></a>00580 <a class="code" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02b">USBD_RETURN_T</a> <a class="code" href="usbd__api_8h.html#d1f49655256f6096e5f6d03ecb358d4f">USBDWrite</a> (   
<a name="l00581"></a>00581     <a class="code" href="structusbd__block__tag.html" title="This structure defines the USBD block object.">USBD_sBlock</a>         *   psBlock,
<a name="l00582"></a>00582         USBD_sEP                *       psEP,
<a name="l00583"></a>00583     IMG_UINT8           *       buf, 
<a name="l00584"></a>00584     IMG_UINT32                  uiTransferLen,
<a name="l00585"></a>00585     IMG_UINT32          *       uiNumberOfBytesWritten,
<a name="l00586"></a>00586     <a class="code" href="structUSBD__ASYNC__T__.html" title="This structure defines the asynchronous I/O descriptor type.">USBD_ASYNC_T</a>        *       async, 
<a name="l00587"></a>00587     IMG_INT32                   timeout
<a name="l00588"></a>00588 );
<a name="l00589"></a>00589 
<a name="l00590"></a>00590 
<a name="l00619"></a>00619 IMG_UINT32 <a class="code" href="usbd__api_8h.html#81dbdd48371c05eb705c7eeb29708188">USBDGetResult</a> (
<a name="l00620"></a>00620     <a class="code" href="structusbd__block__tag.html" title="This structure defines the USBD block object.">USBD_sBlock</a> *   psBlock, 
<a name="l00621"></a>00621         USBD_sEP        *       psEP,
<a name="l00622"></a>00622     IMG_VOID    **  context, 
<a name="l00623"></a>00623     IMG_UINT32  *   num_bytes_transferred, 
<a name="l00624"></a>00624     IMG_INT32       block, 
<a name="l00625"></a>00625     IMG_INT32       timeout
<a name="l00626"></a>00626 );
<a name="l00627"></a>00627 
<a name="l00628"></a>00628 
<a name="l00629"></a>00629 
<a name="l00645"></a>00645 IMG_VOID <a class="code" href="usbd__api_8h.html#8ff4a9672bc061b14f758197dcd211e7">USBDCancel</a> (
<a name="l00646"></a>00646     <a class="code" href="structusbd__block__tag.html" title="This structure defines the USBD block object.">USBD_sBlock</a> *   psBlock,
<a name="l00647"></a>00647         USBD_sEP        *       psEP
<a name="l00648"></a>00648 );
<a name="l00649"></a>00649 
<a name="l00650"></a>00650 <span class="preprocessor">#if !defined (USBD_NO_CBMAN_SUPPORT)</span>
<a name="l00651"></a>00651 <span class="preprocessor"></span>
<a name="l00658"></a>00658 <a class="code" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02b">USBD_RETURN_T</a> <a class="code" href="usbd__api_8h.html#99c857d60deecf7bce08f287c7c32496">USBD_AddEventCallback</a> (
<a name="l00659"></a>00659         <a class="code" href="structusbd__block__tag.html" title="This structure defines the USBD block object.">USBD_sBlock</a>                             *       psBlock,
<a name="l00660"></a>00660         <a class="code" href="usbd__api_8h.html#61dde6aa35d2912927ef1b185eedaa13">USBD_EVENT_T</a>                            eEvent,
<a name="l00661"></a>00661         IMG_pfnEventCallback            pfnEventCallback,
<a name="l00662"></a>00662         img_void                                *       pvCallbackParameter,
<a name="l00663"></a>00663         IMG_hCallback                   *       phEventCallback
<a name="l00664"></a>00664 );
<a name="l00665"></a>00665 
<a name="l00672"></a>00672 <a class="code" href="usbd__api_8h.html#325681b7db59dc1d4959a7ff821fe02b">USBD_RETURN_T</a> <a class="code" href="usbd__api_8h.html#5f731c36c2cf45c4cdef65eed54edbda">USBD_ExecuteEventCallback</a>(
<a name="l00673"></a>00673         <a class="code" href="structusbd__block__tag.html" title="This structure defines the USBD block object.">USBD_sBlock</a>                             *       psBlock,
<a name="l00674"></a>00674         <a class="code" href="usbd__api_8h.html#61dde6aa35d2912927ef1b185eedaa13">USBD_EVENT_T</a>                            eEvent,
<a name="l00675"></a>00675         img_uint32                                      ui32Param,
<a name="l00676"></a>00676         img_void                                *       pvParam
<a name="l00677"></a>00677 );
<a name="l00678"></a>00678 
<a name="l00679"></a>00679 <span class="preprocessor">#endif</span>
<a name="l00680"></a>00680 <span class="preprocessor"></span>
<a name="l00681"></a>00681 <span class="keyword">extern</span> <a class="code" href="structioblock__sBlockDescriptorTag.html">ioblock_sBlockDescriptor</a> IMG_asUSBBlock[];
<a name="l00682"></a>00682 
<a name="l00683"></a>00683 <span class="comment">/******************************************************************************</span>
<a name="l00684"></a>00684 <span class="comment">******************************** End Functions ********************************</span>
<a name="l00685"></a>00685 <span class="comment">*******************************************************************************/</span>
<a name="l00686"></a>00686 
<a name="l00687"></a>00687 <span class="preprocessor">#endif </span><span class="comment">/* __USBD_API_H__ */</span>
</pre></div></div>
</body>
</html>
