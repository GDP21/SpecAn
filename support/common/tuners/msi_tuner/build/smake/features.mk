UNIT_NAME_SUFFIX:=$(UNIT_NAME_SUFFIX)_$(TARGET)

ifneq (, $(findstring IMGWORKS_PERIPHERALS, $(FEATURES)))
WITH_IMGWORKS_PERIPHERALS=1
PORT_DRIVER_SUFFIX=_imgworks
endif

ifneq (, $(findstring GIODRV_PERIPHERALS, $(FEATURES)))
WITH_GIODRV_PERIPHERALS=1
PORT_DRIVER_SUFFIX=_giodrv
endif

ifneq (, $(findstring MSI_001, $(FEATURES)))
UNIT_DEFINES+=MSI_001
UNIT_NAME_SUFFIX:=$(UNIT_NAME_SUFFIX)_001
endif

ifneq (, $(findstring MSI_002, $(FEATURES)))
UNIT_DEFINES+=MSI_002
C_SRC+=msi_002.c
UNIT_NAME_SUFFIX:=$(UNIT_NAME_SUFFIX)_002
endif

ifneq (, $(findstring REF_FREQ_24M576, $(FEATURES)))
UNIT_DEFINES+=REF_FREQ_24M576
endif

ifneq (, $(findstring MSI_SPIM, $(FEATURES)))
UNIT_DEFINES+=MSI_SPIM
C_SRC+=msi_spim$(PORT_DRIVER_SUFFIX).c
UNIT_NAME_SUFFIX:=$(UNIT_NAME_SUFFIX)_spim
endif

ifneq (, $(findstring MSI_SCBM, $(FEATURES)))
UNIT_DEFINES+=MSI_SCBM
C_SRC+=msi_scbm$(PORT_DRIVER_SUFFIX).c
UNIT_NAME_SUFFIX:=$(UNIT_NAME_SUFFIX)_scbm
endif

ifneq (, $(findstring SYS_CLOCK_330MHZ, $(FEATURES)))
UNIT_DEFINES+=SCBCLK_RATE_KHZ=330000
UNIT_NAME_SUFFIX:=$(UNIT_NAME_SUFFIX)_SYSCLK330MHZ
endif

ifneq (, $(findstring SYS_CLOCK_300MHZ, $(FEATURES)))
UNIT_DEFINES+=SCBCLK_RATE_KHZ=300000
UNIT_NAME_SUFFIX:=$(UNIT_NAME_SUFFIX)_SYSCLK300MHZ
endif

ifneq (, $(findstring SYS_CLOCK_250MHZ, $(FEATURES)))
UNIT_DEFINES+=SCBCLK_RATE_KHZ=250000
UNIT_NAME_SUFFIX:=$(UNIT_NAME_SUFFIX)_SYSCLK250MHZ
endif

ifneq (, $(findstring SYS_CLOCK_240MHZ, $(FEATURES)))
UNIT_DEFINES+=SCBCLK_RATE_KHZ=240000
UNIT_NAME_SUFFIX:=$(UNIT_NAME_SUFFIX)_SYSCLK240MHZ
endif

ifneq (, $(findstring SYS_CLOCK_200MHZ, $(FEATURES)))
UNIT_DEFINES+=SCBCLK_RATE_KHZ=200000
UNIT_NAME_SUFFIX:=$(UNIT_NAME_SUFFIX)_SYSCLK200MHZ
endif

ifneq (, $(findstring SYS_CLOCK_180MHZ, $(FEATURES)))
UNIT_DEFINES+=SCBCLK_RATE_KHZ=180000
UNIT_NAME_SUFFIX:=$(UNIT_NAME_SUFFIX)_SYSCLK180MHZ
endif

ifneq (, $(findstring SYS_CLOCK_160MHZ, $(FEATURES)))
UNIT_DEFINES+=SCBCLK_RATE_KHZ=160000
UNIT_NAME_SUFFIX:=$(UNIT_NAME_SUFFIX)_SYSCLK160MHZ
endif

ifneq (, $(findstring SYS_CLOCK_80MHZ, $(FEATURES)))
UNIT_DEFINES+=SCBCLK_RATE_KHZ=80000
UNIT_NAME_SUFFIX:=$(UNIT_NAME_SUFFIX)_SYSCLK80MHZ
endif

ifneq (, $(findstring SCBM_CLOCK_XTAL1, $(FEATURES)))
UNIT_DEFINES+=SCBCLK_RATE_KHZ=24576
endif

ifdef WITH_IMGWORKS_PERIPHERALS
UNIT_NAME_SUFFIX:=$(UNIT_NAME_SUFFIX)_imgworks
endif

ifdef WITH_GIODRV_PERIPHERALS
UNIT_NAME_SUFFIX:=$(UNIT_NAME_SUFFIX)_giodrv
endif

ifneq (, $(findstring MSI_DISABLE_EXT, $(FEATURES)))
UNIT_DEFINES+=MSI_DISABLE_EXT
endif

ifneq (, $(findstring DISABLE_EARLY_GAIN_MODS, $(FEATURES)))
UNIT_DEFINES+=DISABLE_EARLY_GAIN_FRACTIONAL_DB_GAIN
endif


